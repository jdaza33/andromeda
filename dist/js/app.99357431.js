(function(t){function e(e){for(var s,r,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)r=o[d],i[r]&&p.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={1:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;n.push([30,0]),a()})({"+nqv":function(t,e,a){"use strict";var s=a("oR7B"),i=a.n(s);i.a},"0OfD":function(t,e,a){"use strict";var s=a("jw4u"),i=a.n(s);i.a},24:function(t,e){},25:function(t,e){},26:function(t,e){},27:function(t,e){},30:function(t,e,a){t.exports=a("Vtdi")},"33hS":function(t,e,a){},"5yPJ":function(t,e,a){},"6FSB":function(t,e,a){"use strict";var s=a("78oo"),i=a.n(s);i.a},"78oo":function(t,e,a){},"7onj":function(t,e,a){"use strict";var s=a("BVN2"),i=a.n(s);i.a},AALZ:function(t,e,a){"use strict";var s=a("x36v"),i=a.n(s);i.a},AnXT:function(t,e,a){"use strict";var s=a("Sg/0"),i=a.n(s);i.a},BVN2:function(t,e,a){},EHbF:function(t,e,a){},GCik:function(t,e,a){},HEpx:function(t,e,a){"use strict";var s=a("IX3C"),i=a.n(s);i.a},HIoq:function(t,e,a){},HqTB:function(t,e,a){},IX3C:function(t,e,a){},Kuw1:function(t,e,a){},L9j8:function(t,e,a){"use strict";var s=a("qurk"),i=a.n(s);i.a},LyET:function(t,e,a){},MFct:function(t,e,a){"use strict";var s=a("GCik"),i=a.n(s);i.a},MMBC:function(t,e,a){},MRnX:function(t,e,a){},MgQ0:function(t,e,a){"use strict";var s=a("gI2r"),i=a.n(s);i.a},Mge8:function(t,e,a){"use strict";var s=a("5yPJ"),i=a.n(s);i.a},"O/99":function(t,e,a){"use strict";var s=a("oeyi"),i=a.n(s);i.a},Q71u:function(t,e,a){"use strict";var s=a("EHbF"),i=a.n(s);i.a},SbcH:function(t,e,a){"use strict";var s=a("LyET"),i=a.n(s);i.a},"Sg/0":function(t,e,a){},UL5N:function(t,e,a){"use strict";var s=a("tjCq"),i=a.n(s);i.a},"V9N+":function(t,e,a){"use strict";var s=a("MMBC"),i=a.n(s);i.a},Vtdi:function(t,e,a){"use strict";a.r(e);a("VRzm");var s=a("Kw5r"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("router-view")],1)},n=[],r={},o=r,c=(a("nNx0"),a("MgQ0"),a("KHd+")),l=Object(c["a"])(o,i,n,!1,null,null,null),u=l.exports,d=(a("f3/d"),a("jE9Z")),p=a("vDqi"),f=a.n(p),h=a("Mj6V"),m=a.n(h);m.a.configure({showSpinner:!1}),m.a.configure({minimum:.3});var b="https://server-andromeda.herokuapp.com",v=f.a.create({baseURL:b,timeout:3e4});v.interceptors.request.use(function(t){return m.a.start(),t}),v.interceptors.response.use(function(t){return m.a.done(),t});var g=v,C=(a("KKXr"),!0),_={text:{title:{login:"Iniciar Sesión",register:"Registro de Usuario",restoreKey:"Restaurar Clave",report:"Gestión de Reportes",support:"Gestión de Soportes",newsupport:"Nueva solicitud de soporte",images:"Imagenes",details:"Detalles",date:"Fecha",status:"Estado",users:"Gestión de Usuarios",newuser:"Nuevo Usuario",assignSupport:"Asignar Soporte",recordSupport:"Historial de Soporte"},button:{enter:"Entrar",restore:"Restaurar",save:"Guardar",new:"Nuevo",delete:"Eliminar",cancel:"Cancelar",close:"Cerrar",send:"Enviar",deselect:"Deseleccionar",deny:"Rechazar",approve:"Aprobar",lock:"Bloquear",unlock:"Desbloquear"},input:{username:"Usuario",password:"Contraseña",name:"Nombre",nit:"Numero de Identificación",email:"Correo Electronico",issue:"Asunto",message:"Mensaje",description:"Descripción",upload:"¡Suba sus imagenes aquí!",phone:"Telefono",toAssign:"Asignar a"}},success:{S001:"El Usuario ha sido creado con exito",S002:"Solicitud creada con exito",S003:"Datos guardados",S004:"Factura Pagada",S005:"Evento creado"},warn:{},error:{E001:"El Numero de Identificación que introdujo, ya está registrado",E002:"El Correo Electronico que introdujo, ya está registrado",E003:"El Usuario que introdujo, ya está registrado",E004:"El Usuario que introdujo no existe, verique por favor",E005:"¡Usuario bloqueado!",E006:"¡Contraseña incorrecta!",E007:"Por favor llene todos los campos",E008:"Error, intente de nuevo",E009:"Error al subir las imagenes, intente de nuevo"}},w={text:{title:{login:"Login",register:"User Register",restoreKey:"Restore Key"},button:{enter:"Enter",restore:"Restore",save:"Save"},input:{username:"Username",password:"Password",name:"Name",nit:"NIT",email:"Email"}}},k=C?_:w,y=function(t,e){var a=e.split("")[0],s="S"==a?{a:"is-success",b:"success"}:"W"==a?{a:"is-warning",b:"warn"}:"I"==a?{a:"is-info",b:"info"}:{a:"is-danger",b:"error"},i=k[s.b][e];t.$toast.open({duration:3e3,message:i,position:"is-top",type:s.a,queue:!1})},x=a("FLf1"),S=a.n(x),$={user:{authenticated:!1},authenticate:function(t,e,a){var s=this;g.post("/auth/login",e).then(function(e){if(e.data.res){var i=e.data.token;t.$cookie.set("token",i,{expires:3},"1D"),s.user.authenticated=!0;var n=S.a.verify(i,"blackencio",function(t,e){return e.user._id});t.$cookie.set("userId",n),a&&Ra.push({name:a})}else y(t,e.data.err)}).catch(function(t){alert(t)})},checkAuthentication:function(){var t=document.cookie;this.user.authenticated=!!t},getAuthenticationHeader:function(t){return"Bearer ".concat(t.$cookie.get("token"))}},A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("a",{staticClass:"button is-vcentered is-primary is-outlined is-rounded",on:{click:function(e){t.go("login")}}},[t._v("Login")])]),a("router-view")],1)},D=[],R={methods:{go:function(t){this.$router.push({name:t})}}},P=R,E=Object(c["a"])(P,A,D,!1,null,null,null),M=E.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"columns"},[a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.show,expression:"show==1"}],staticClass:"column is-one-third master"},[a("section",{staticClass:"section"},[a("p",{staticClass:"title is-3 has-text-centered"},[t._v("¡Bienvenido!")]),a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.username,type:"text","icon-pack":"fas",icon:"user",maxlength:"12",min:"5",rounded:""},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.loginUser()}},model:{value:t.login.username,callback:function(e){t.$set(t.login,"username",e)},expression:"login.username"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.password,type:"password","icon-pack":"fas",icon:"key","password-reveal":"",rounded:""},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.loginUser()}},model:{value:t.login.password,callback:function(e){t.$set(t.login,"password",e)},expression:"login.password"}})],1),a("div",{staticClass:"has-text-centered"},[a("a",{staticClass:"button is-vcentered is-primary is-outlined is-rounded",on:{click:function(e){t.loginUser()}}},[t._v(t._s(t.global.title.login))])]),a("div",{staticClass:"has-text-centered"},[a("a",{on:{click:function(e){t.changeShow(2)}}},[t._v(t._s(t.global.title.register))])])],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.show,expression:"show==2"}],staticClass:"column is-one-third master"},[a("section",{staticClass:"section"},[a("p",{staticClass:"title is-3 has-text-centered"},[t._v("¡Únete!")]),a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.name,type:"text","icon-pack":"fas",icon:"user-circle",maxlength:"20",rounded:""},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.newUser()}},model:{value:t.register.name,callback:function(e){t.$set(t.register,"name",e)},expression:"register.name"}})],1),a("b-field",[a("b-input",{directives:[{name:"mask",rawName:"v-mask",value:"A-#########",expression:"'A-#########'"}],attrs:{placeholder:t.global.input.nit,type:"text","icon-pack":"fas",icon:"address-card",maxlength:"20",masked:"false",rounded:""},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.newUser()}},model:{value:t.register.nit,callback:function(e){t.$set(t.register,"nit",e)},expression:"register.nit"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.email,type:"email","icon-pack":"fas",icon:"at",maxlength:"50",rounded:""},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.newUser()}},model:{value:t.register.email,callback:function(e){t.$set(t.register,"email",e)},expression:"register.email"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.username,type:"text","icon-pack":"fas",icon:"user",maxlength:"12",rounded:""},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.newUser()}},model:{value:t.register.username,callback:function(e){t.$set(t.register,"username",e)},expression:"register.username"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.password,type:"password","icon-pack":"fas",icon:"key","password-reveal":"",rounded:""},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.newUser()}},model:{value:t.register.password,callback:function(e){t.$set(t.register,"password",e)},expression:"register.password"}})],1),a("div",{staticClass:"has-text-centered"},[a("a",{staticClass:"button is-vcentered is-primary is-outlined is-rounded",on:{click:function(e){t.newUser()}}},[t._v(t._s(t.global.button.save))])]),a("div",{staticClass:"has-text-centered"},[a("a",{on:{click:function(e){t.changeShow(1)}}},[t._v(t._s(t.global.title.login))])])],1)]),t._m(0)])},F=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"interactive-bg column master submaster"},[a("img",{staticClass:"login-logo",attrs:{src:"img/logo.svg"}})])}],N={name:"login",data:function(){return{show:1,login:{username:"",password:""},register:{name:"",nit:"",email:"",username:"",password:""},global:k.text}},methods:{changeShow:function(t){this.show=t},newUser:function(){var t=this;this.validateInput(this.register)&&g.post("/others/newuser",this.register).then(function(e){t.$log.debug(e.data),e.data.res?(y(t,e.data.cod),t.show=1,t.clearRegister()):y(t,e.data.err)}).catch(function(t){alert(t)})},loginUser:function(){this.validateInput(this.login)&&$.authenticate(this,this.login,"dash")},clearRegister:function(){this.register.name="",this.register.email="",this.register.nit="",this.register.username="",this.register.password=""},go:function(t){this.$router.push({name:t})},validateInput:function(t){var e=!0;for(var a in t)if(""==t[a])return e=!1,y(this,"E007"),e;return e}}},z=N,O=(a("uuFC"),Object(c["a"])(z,j,F,!1,null,"4a3edb84",null)),I=O.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"dash"}},[a("nav",{staticClass:"navbar is-transparent"},[a("div",{staticClass:"navbar-brand"},[a("a",{staticClass:"navbar-item",on:{click:function(e){t.go("home")}}},[a("img",{attrs:{src:"img/logo.svg",alt:"Andromeda",width:"50",height:"28"}}),a("h1",{staticClass:"title is-5"},[t._v("Andromeda")])]),a("div",{staticClass:"navbar-burger burger",attrs:{"data-target":"moreNavbar"},on:{click:function(e){t.burger()}}},[a("span"),a("span"),a("span")])]),a("div",{staticClass:"navbar-menu",attrs:{id:"moreNavbar"}},[a("div",{staticClass:"navbar-end"},[a("div",{staticClass:"navbar-item"},[a("div",{staticClass:"field is-grouped"},[a("b-dropdown",{attrs:{hoverable:""}},[a("button",{staticClass:"button is-vcentered is-primary is-outlined is-rounded",attrs:{slot:"trigger"},slot:"trigger"},[a("span",[t._v(t._s(t.userData.username))]),a("b-icon",{attrs:{pack:"fas",icon:"bars",size:"is-small"}})],1),a("b-dropdown-item",{on:{click:function(e){t.isComponentModalUserActive=!0}}},[t._v("Cuenta")]),a("b-dropdown-item",{on:{click:function(e){t.logout()}}},[t._v("Salir")])],1)],1)])])])]),a("div",{staticClass:"columns is-fullheight"},[a("div",{staticClass:"column is-2 is-sidebar-menu is-hidden-mobile"},[a("div",{staticClass:"container-photo"},[a("img",{staticClass:"photo",attrs:{src:""==t.userInfoData.photo?"img/profile_default.svg":t.api+"/uploads/profile/"+t.userInfoData.photo}}),a("p",{staticClass:"title is-5 fullname"},[t._v(t._s(t.userInfoData.name+" "+t.userInfoData.lastname))])]),a("hr"),a("aside",{staticClass:"menu"},[a("p",{staticClass:"menu-label title is-6"},[t._v("\n          Menu\n        ")]),a("ul",{staticClass:"menu-list"},t._l(t.items,function(e,s){return a("li",{directives:[{name:"show",rawName:"v-show",value:e.role,expression:"item.role"}],key:s,on:{click:function(a){t.go(e.url)}}},[a("a",[a("b-icon",{attrs:{pack:"fas",icon:e.icon,size:"is-small"}}),t._v("\n              "+t._s(e.title)+"\n            ")],1)])}))])]),a("div",{staticClass:"column is-main-content"},[a("b-modal",{attrs:{active:t.isComponentModalUserActive,"has-modal-card":"",width:960},on:{"update:active":function(e){t.isComponentModalUserActive=e}}},[a("modal-user-data",{attrs:{userData:t.userData,userInfoData:t.userInfoData}})],1),a("router-view")],1)]),t._m(0),a("b-loading",{attrs:{"is-full-page":t.isFullPage,active:t.isLoading,"can-cancel":!1},on:{"update:active":function(e){t.isLoading=e}}})],1)},B=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"footer"},[a("div",{staticClass:"content has-text-centered"},[a("p",[t._v("\n        ©2018 — "),a("strong",[t._v("Andromeda")])])])])}],U=(a("rGqo"),a("ls82"),a("MECJ")),T=new s["default"],q=T,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head has-text-centered"},[a("p",{staticClass:"modal-card-title"},[t._v("NIT: "+t._s(t.infoPersonal.nit))])]),a("section",{staticClass:"modal-card-body"},[a("b-tabs",{staticClass:"block",attrs:{position:"is-centered",type:"is-boxed"}},[a("b-tab-item",{attrs:{label:"Datos Personales"}},[a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-6"},[a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.name,type:"text","icon-pack":"fas",icon:"user-circle",maxlength:"20",rounded:""},model:{value:t.infoPersonal.name,callback:function(e){t.$set(t.infoPersonal,"name",e)},expression:"infoPersonal.name"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:"Apellido",type:"text","icon-pack":"fas",icon:"user-circle",maxlength:"20",rounded:""},model:{value:t.infoPersonal.lastname,callback:function(e){t.$set(t.infoPersonal,"lastname",e)},expression:"infoPersonal.lastname"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.email,type:"text","icon-pack":"fas",icon:"at",maxlength:"50",rounded:""},model:{value:t.infoPersonal.email,callback:function(e){t.$set(t.infoPersonal,"email",e)},expression:"infoPersonal.email"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.phone,type:"text","icon-pack":"fas",icon:"phone",maxlength:"20",rounded:""},model:{value:t.infoPersonal.phone,callback:function(e){t.$set(t.infoPersonal,"phone",e)},expression:"infoPersonal.phone"}})],1)],1),a("div",{staticClass:"column is-6"},[t.isProfile?a("div",{staticClass:"center"},[a("figure",{staticClass:"image is-96x96"},[a("img",{attrs:{src:t.api+"/uploads/profile/"+t.infoPersonal.photo}})])]):a("div",{staticClass:"center"},[a("figure",{staticClass:"image is-96x96"},[a("img",{attrs:{src:"img/profile_default.svg"}})])]),a("br"),a("div",{staticClass:"file has-name is-small has-name is-boxed center"},[a("label",{staticClass:"file-label"},[a("input",{ref:"profile",staticClass:"file-input",attrs:{type:"file",name:"profile",id:"profile"},on:{change:function(e){t.handleFileUpload()}}}),a("span",{staticClass:"file-cta"},[a("span",{staticClass:"file-icon"},[a("i",{staticClass:"fas fa-upload"})]),a("span",{staticClass:"file-label"},[t._v("\n                                    Choose a file…\n                                ")])]),a("span",{staticClass:"file-name"},[t._v("\n                                "+t._s(t.profile.name)+"\n                                ")])])])])])]),a("b-tab-item",{attrs:{label:"Dirección"}},[a("b-field",[a("b-input",{attrs:{placeholder:"País",type:"text","icon-pack":"fas",icon:"globe",maxlength:"20",rounded:""},model:{value:t.infoPersonal.address.country,callback:function(e){t.$set(t.infoPersonal.address,"country",e)},expression:"infoPersonal.address.country"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:"Estado",type:"text","icon-pack":"fas",icon:"location-arrow",maxlength:"20",rounded:""},model:{value:t.infoPersonal.address.state,callback:function(e){t.$set(t.infoPersonal.address,"state",e)},expression:"infoPersonal.address.state"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:"Localidad",type:"text","icon-pack":"fas",icon:"map-marker-alt",maxlength:"20",rounded:""},model:{value:t.infoPersonal.address.location,callback:function(e){t.$set(t.infoPersonal.address,"location",e)},expression:"infoPersonal.address.location"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:"Descripción",type:"text","icon-pack":"fas",icon:"compass",maxlength:"20",rounded:""},model:{value:t.infoPersonal.address.description,callback:function(e){t.$set(t.infoPersonal.address,"description",e)},expression:"infoPersonal.address.description"}})],1)],1),a("b-tab-item",{staticClass:"auth",attrs:{label:"Autenticación"}},[a("b-field",[a("b-input",{attrs:{placeholder:"Username",type:"text","icon-pack":"fas",icon:"user-astronaut",maxlength:"20",rounded:""},model:{value:t.infoUser.username,callback:function(e){t.$set(t.infoUser,"username",e)},expression:"infoUser.username"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:"Referencia",type:"text","icon-pack":"fas",icon:"sync-alt",maxlength:"20",rounded:"",disabled:""},model:{value:t.infoUser.ref,callback:function(e){t.$set(t.infoUser,"ref",e)},expression:"infoUser.ref"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:"Role",type:"text","icon-pack":"fas",icon:"hand-paper",maxlength:"50",rounded:"",disabled:""},model:{value:t.infoUser.rol,callback:function(e){t.$set(t.infoUser,"rol",e)},expression:"infoUser.rol"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:"Contraseña",type:"password","icon-pack":"fas",icon:"key",rounded:"",disabled:""},model:{value:t.infoUser.password,callback:function(e){t.$set(t.infoUser,"password",e)},expression:"infoUser.password"}})],1)],1)],1)],1),a("footer",{staticClass:"modal-card-foot foot"},[a("button",{staticClass:"button is-outlined is-rounded",attrs:{type:"button"},on:{click:function(e){t.$parent.close()}}},[t._v("Close")]),a("button",{staticClass:"button is-primary is-rounded",on:{click:function(e){t.saveData()}}},[t._v("Guardar")])])])},V=[],G=a("WjD0"),Y=a.n(G),K={data:function(){return{infoPersonal:"",infoUser:"",global:k.text,isProfile:!1,profile:"",api:"https://server-andromeda.herokuapp.com"}},props:["userData","userInfoData"],methods:{loadData:function(){this.infoPersonal=this.userInfoData,this.infoUser=this.userData,""!=this.userInfoData.photo&&(this.isProfile=!0)},handleFileUpload:function(){this.profile=this.$refs.profile.files[0]},uploadProfile:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e,a,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=new Y.a,e.append("profile",this.profile),a="",t.next=5,g.post("/upprofile",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){t.data.res&&(a=t.data.profile.filename)}).catch(function(t){y(s,"E009"),s.$log.debug(t)});case 5:return t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),saveData:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e,a,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(""==this.profile){t.next=5;break}return t.next=3,this.uploadProfile();case 3:e=t.sent,this.infoPersonal.photo=e;case 5:return a=!1,t.next=8,g.put("/infopersonal/".concat(this.infoPersonal._id),this.infoPersonal,{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){a=!!t.data.res}).catch(function(t){alert(t)});case 8:return t.next=10,g.put("/user/".concat(this.infoUser._id),this.infoUser,{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){t.data.res?a&&(y(s,"S003"),s.$parent.close(),location.reload()):y(s,"E008")}).catch(function(t){alert(t)});case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},created:function(){this.loadData()},watch:{$route:"loadData"}},J=K,X=(a("V9N+"),Object(c["a"])(J,H,V,!1,null,"64aefd75",null)),Z=X.exports,W="";q.$on("getInfopersonal",function(t){return this.$log.debug(W),t});var Q={data:function(){return{drawer:!0,preLoading:0,isLoading:!0,isFullPage:!0,isComponentModalUserActive:!1,userData:"",userInfoData:"",api:"https://server-andromeda.herokuapp.com",items:[{title:"Home",icon:"home",role:!0,type:"ALL",url:"homeforall"},{title:"Usuarios",icon:"users",role:!1,type:"ALL",url:"users"},{title:"Servicios",icon:"wrench",role:!1,type:"A",url:"supporta"},{title:"Servicios",icon:"wrench",role:!1,type:"C",url:"supportc"},{title:"Reporte",icon:"clipboard",role:!1,type:"A",url:"report"},{title:"Agenda",icon:"calendar-alt",role:!1,type:"ALL",url:"calendar"},{title:"Facturación",icon:"dollar-sign",role:!1,type:"A",url:"billadmin"},{title:"Facturación",icon:"dollar-sign",role:!1,type:"C",url:"billclient"}],right:null,menus:[{title:"Cerrar Sesión"}]}},methods:{logout:function(){var t=this;g.get("/logout").then(function(e){e.data.res&&(t.$cookie.delete("token"),t.$cookie.delete("userId"),t.$cookie.delete("ref"),t.$cookie.delete("type_user"),t.$cookie.delete("infopersonalId"),location.reload())}).catch(function(t){alert(t)})},go:function(t){this.$router.push({name:t})},loadDataUser:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.get("/user/".concat(this.$cookie.get("userId")),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){e.userData=t.data.user,e.preLoading=e.preLoading+1,e.$cookie.set("ref",e.userData.ref),e.$cookie.set("type_user",e.userData.type_user)}).catch(function(t){alert(t)});case 2:return t.next=4,g.get("/infopersonal/".concat(this.userData.id_infopersonal),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){e.userInfoData=t.data.infoPersonal,e.preLoading=e.preLoading+1,e.$cookie.set("infopersonalId",e.userInfoData._id)}).catch(function(t){alert(t)});case 4:return t.next=6,this.loadRoleUser();case 6:return t.next=8,this.isNotLoading();case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),loadRoleUser:function(){var t=this;if(2==this.preLoading){if(0==this.userData.type_user)if("ALL"==this.userData.rol)this.items.forEach(function(t){"ALL"==t.type||"A"==t.type?t.role=!0:t.role=!1});else{var e=this.userData.rol.split("|");e.forEach(function(e){t.items.forEach(function(t){"ALL"==e.type||"A"==e.type?e==t.title&&(t.role=!0):e.role=!1})})}if(1==this.userData.type_user)if("ALL"==this.userData.rol)this.items.forEach(function(t){"ALL"==t.type||"C"==t.type?t.role=!0:t.role=!1});else{var a=this.userData.rol.split("|");a.forEach(function(e){t.items.forEach(function(t){"ALL"==e.type||"C"==e.type?e==t.title&&(t.role=!0):e.role=!1})})}}},burger:function(){var t=document.querySelector(".burger"),e=document.querySelector("#"+t.dataset.target);t.classList.toggle("is-active"),e.classList.toggle("is-active")},isNotLoading:function(){2==this.preLoading&&(this.isLoading=!1)}},created:function(){this.loadDataUser()},watch:{$route:"loadDataUser"},components:{ModalUserData:Z},mounted:function(){this.$nextTick(function(){this.go("users")})}},tt=Q,et=(a("qs6R"),Object(c["a"])(tt,L,B,!1,null,"05d3114a",null)),at=et.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("section",{staticClass:"hero is-primary is-fullheight"},[a("div",{staticClass:"hero-body"},[a("div",{staticClass:"container has-text-centered"},[a("div",{staticClass:"column is-4 is-offset-4"},[a("h3",{staticClass:"title is-2 has-text-white"},[t._v("Root")]),a("div",{staticClass:"box"},[a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.name,type:"text","icon-pack":"fas",icon:"user-circle",maxlength:"20",rounded:""},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.newRoot()}},model:{value:t.register.name,callback:function(e){t.$set(t.register,"name",e)},expression:"register.name"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.nit,type:"text","icon-pack":"fas",icon:"address-card",maxlength:"20",rounded:""},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.newRoot()}},model:{value:t.register.nit,callback:function(e){t.$set(t.register,"nit",e)},expression:"register.nit"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.email,type:"email","icon-pack":"fas",icon:"at",maxlength:"50",rounded:""},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.newRoot()}},model:{value:t.register.email,callback:function(e){t.$set(t.register,"email",e)},expression:"register.email"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.username,type:"text","icon-pack":"fas",icon:"user",maxlength:"12",rounded:""},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.newRoot()}},model:{value:t.register.username,callback:function(e){t.$set(t.register,"username",e)},expression:"register.username"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.password,type:"password","icon-pack":"fas",icon:"key","password-reveal":"",rounded:""},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.newRoot()}},model:{value:t.register.password,callback:function(e){t.$set(t.register,"password",e)},expression:"register.password"}})],1),a("div",{staticClass:"has-text-centered"},[a("a",{staticClass:"button is-vcentered is-primary is-outlined is-rounded",on:{click:function(e){t.newRoot()}}},[t._v(t._s(t.global.button.save))])])],1)])])])])])},it=[],nt={data:function(){return{register:{name:"",nit:"",email:"",username:"",password:"",type_user:"0"},global:k.text}},methods:{newRoot:function(){var t=this;this.validateInput(this.register)&&g.post("/others/newroot",this.register).then(function(e){t.$log.debug(e.data),e.data.res?y(t,e.data.cod):y(t,e.data.err)}).catch(function(e){t.$log.debug("hola megan"),alert(e)})},validateInput:function(t){var e=!1;for(var a in t)e=""!=t[a];return e||y(this,"E007"),e}}},rt=nt,ot=Object(c["a"])(rt,st,it,!1,null,null,null),ct=ot.exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("breadcrub",{attrs:{name:"Gestión de Servicios",icon:"wrench"}}),a("b-tabs",{attrs:{type:"is-boxed",position:"is-centered",expanded:""}},[a("b-tab-item",{attrs:{label:"Para todos","icon-pack":"fas",icon:"door-open"}},["0"==t.showTypeTable?a("p",{staticClass:"buttons"},[a("a",{staticClass:"button is-success is-small is-rounded",on:{click:function(e){t.approve()}}},[a("span",[t._v(t._s(t.global.button.approve))]),a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-thumbs-up"})])]),a("a",{staticClass:"button is-danger is-small is-rounded",on:{click:function(e){t.deny()}}},[a("span",[t._v(t._s(t.global.button.deny))]),a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-times"})])]),a("a",{staticClass:"button is-info is-small is-rounded",on:{click:function(e){t.deselect()}}},[a("span",[t._v(t._s(t.global.button.deselect))]),a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-bolt"})])])]):t._e(),a("b-table",{attrs:{data:t.isEmpty?[]:t.data,bordered:t.isBordered,striped:t.isStriped,narrowed:t.isNarrowed,hoverable:t.isHoverable,loading:t.isLoading,focusable:t.isFocusable,"mobile-cards":t.hasMobileCards,selected:t.selected,paginated:t.isPaginated,"per-page":t.perPage,"current-page":t.currentPage,"pagination-simple":t.isPaginationSimple,"default-sort-direction":t.defaultSortDirection},on:{"update:selected":function(e){t.selected=e},"update:currentPage":function(e){t.currentPage=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-table-column",{attrs:{field:"client",label:"Cliente",centered:"",sortable:""}},[a("a",{staticClass:"button is-info is-small",on:{click:function(a){t.loadDetailsClient(e.row.id_client)}}},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-user-astronaut"})])])]),a("b-table-column",{attrs:{field:"date",label:"Creado",centered:"",sortable:""}},[a("span",{staticClass:"tag is-primary"},[t._v("\n                            "+t._s(t.convertDate(e.row.createdAt.substring(0,10)))+"\n                        ")])]),a("b-table-column",{attrs:{field:"issue",label:"Asunto",centered:"",sortable:""}},[t._v("\n                        "+t._s(e.row.issue)+"\n                    ")]),a("b-table-column",{attrs:{field:"assigned",label:"Asignado",centered:"",sortable:""}},[""!=e.row.assigned?a("a",{staticClass:"button is-success is-small",on:{click:function(a){t.loadDetailsClient(e.row.assigned)}}},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-user-astronaut"})])]):a("div",[a("a",{staticClass:"button is-danger is-small"},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-times"})])])])]),a("b-table-column",{attrs:{field:"status",label:"Estado",centered:"",sortable:""}},[a("b-tag",{attrs:{type:"P"==e.row.status?"is-warning":"A"==e.row.status?"is-info":"R"==e.row.status?"is-danger":"F"==e.row.status?"is-success":"is-dark"}},[t._v("\n\n                            "+t._s("P"==e.row.status?"Pendiente":"A"==e.row.status?"Aprobado":"R"==e.row.status?"Rechazado por Técnico":"F"==e.row.status?"Finalizado":"Rechazado por Cliente")+"\n                            \n                            ")])],1),a("b-table-column",{attrs:{field:"more",label:"Detalles",centered:"",sortable:""}},[a("a",{staticClass:"button is-info is-small",on:{click:function(a){t.loadDetailsSupport(e.row.nro)}}},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-info"})])])])]}}])},[a("template",{slot:"empty"},[a("section",{staticClass:"section"},[a("div",{staticClass:"content has-text-grey has-text-centered"},[a("p",[a("b-icon",{attrs:{pack:"fas",icon:"frown-open",size:"is-large"}})],1),a("p",[t._v("Nothing here.")])])])])],2)],1),a("b-tab-item",{attrs:{label:"Para mí","icon-pack":"fas",icon:"door-closed"}},["0"==t.showTypeTable?a("p",{staticClass:"buttons"},[a("a",{staticClass:"button is-success is-small is-rounded",on:{click:function(e){t.finalize()}}},[a("span",[t._v("Finalizar")]),a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-plug"})])]),a("a",{staticClass:"button is-info is-small is-rounded",on:{click:function(e){t.deselect()}}},[a("span",[t._v(t._s(t.global.button.deselect))]),a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-bolt"})])])]):t._e(),a("b-table",{attrs:{data:t.isEmpty?[]:t.dataForMe,bordered:t.isBordered,striped:t.isStriped,narrowed:t.isNarrowed,hoverable:t.isHoverable,loading:t.isLoading,focusable:t.isFocusable,"mobile-cards":t.hasMobileCards,selected:t.selectedForMe,paginated:t.isPaginated,"per-page":t.perPageForMe,"current-page":t.currentPageForMe,"pagination-simple":t.isPaginationSimple,"default-sort-direction":t.defaultSortDirection},on:{"update:selected":function(e){t.selectedForMe=e},"update:currentPage":function(e){t.currentPageForMe=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-table-column",{attrs:{field:"client",label:"Cliente",centered:"",sortable:""}},[a("a",{staticClass:"button is-info is-small",on:{click:function(a){t.loadDetailsClient(e.row.id_client)}}},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-user-astronaut"})])])]),a("b-table-column",{attrs:{field:"date",label:"Fecha",centered:"",sortable:""}},[a("span",{staticClass:"tag is-primary"},[t._v("\n                            "+t._s(t.convertDate(e.row.createdAt.substring(0,10)))+"\n                        ")])]),a("b-table-column",{attrs:{field:"issue",label:"Asunto",centered:"",sortable:""}},[t._v("\n                        "+t._s(e.row.issue)+"\n                    ")]),a("b-table-column",{attrs:{field:"status",label:"Estado",centered:"",sortable:""}},[a("b-tag",{attrs:{type:"P"==e.row.status?"is-warning":"A"==e.row.status?"is-info":"R"==e.row.status?"is-danger":"F"==e.row.status?"is-success":"is-dark"}},[t._v("\n\n                            "+t._s("P"==e.row.status?"Pendiente":"A"==e.row.status?"Aprobado":"R"==e.row.status?"Rechazado por Técnico":"F"==e.row.status?"Finalizado":"Rechazado por Cliente")+"\n                            \n                            ")])],1),a("b-table-column",{attrs:{field:"more",label:"Detalles",centered:"",sortable:""}},[a("a",{staticClass:"button is-info is-small",on:{click:function(a){t.loadDetailsSupport(e.row.nro)}}},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-info"})])])]),a("b-table-column",{attrs:{field:"record",label:"Historial",centered:"",sortable:""}},["F"!=e.row.status?a("a",{staticClass:"button is-success is-small",on:{click:function(a){t.showRecordSupportAdmin(e.row.nro)}}},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-headset"})])]):a("a",{staticClass:"button is-black is-small"},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-headset"})])])])]}}])},[a("template",{slot:"empty"},[a("section",{staticClass:"section"},[a("div",{staticClass:"content has-text-grey has-text-centered"},[a("p",[a("b-icon",{attrs:{pack:"fas",icon:"frown-open",size:"is-large"}})],1),a("p",[t._v("Nothing here.")])])])])],2)],1)],1),a("b-modal",{attrs:{active:t.isComponentModalDetailsSupportActive,"has-modal-card":"",width:960},on:{"update:active":function(e){t.isComponentModalDetailsSupportActive=e}}},[a("modal-details-support",{attrs:{dataSupport:t.data,nroSupport:t.nroSupport}})],1),a("b-modal",{attrs:{active:t.isComponentModalDetailsClientActive,"has-modal-card":"",width:960},on:{"update:active":function(e){t.isComponentModalDetailsClientActive=e}}},[a("modal-details-client",{attrs:{idClient:t.idClient}})],1),a("b-modal",{attrs:{active:t.isComponentModalAssignSupportActive,"has-modal-card":"",width:960},on:{"update:active":function(e){t.isComponentModalAssignSupportActive=e}}},[a("modal-assign-support",{attrs:{support:t.selected},on:{"hijo:change":t.listenSon}})],1),a("b-modal",{attrs:{active:t.isComponentModalRecordSupportActive,"has-modal-card":"",width:960},on:{"update:active":function(e){t.isComponentModalRecordSupportActive=e}}},[a("modal-record-support-admin",{attrs:{nroSupport:t.nroSupport},on:{"hijo:change":t.listenSon}})],1)],1)},ut=[],dt=(a("a1Th"),a("yt8O"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head has-text-centered"},[a("p",{staticClass:"modal-card-title"},[t._v(t._s(t.global.title.details))])]),a("section",{staticClass:"modal-card-body"},[a("b-field",{attrs:{grouped:"","group-multiline":""}},[a("div",{staticClass:"control"},[a("b-taglist",{attrs:{attached:""}},[a("b-tag",{attrs:{type:"is-dark",size:"is-medium"}},[t._v("Nro.")]),a("b-tag",{attrs:{type:"is-info",size:"is-medium"}},[t._v(t._s(t.data.nro))])],1)],1),a("div",{staticClass:"control"},[a("b-taglist",{attrs:{attached:""}},[a("b-tag",{attrs:{type:"is-dark",size:"is-medium"}},[t._v(t._s(t.global.title.date))]),a("b-tag",{attrs:{type:"is-primary",size:"is-medium"}},[t._v(t._s(t.convertDate(t.data.createdAt.substring(0,10))))])],1)],1),a("div",{staticClass:"control"},[a("b-taglist",{attrs:{attached:""}},[a("b-tag",{attrs:{type:"is-dark",size:"is-medium"}},[t._v(t._s(t.global.title.status))]),a("b-tag",{attrs:{type:"P"==t.data.status?"is-warning":"A"==t.data.status?"is-info":"R"==t.data.status?"is-danger":"F"==t.data.status?"is-success":"is-dark",size:"is-medium"}},[t._v("\n                        "+t._s("P"==t.data.status?"Pendiente":"A"==t.data.status?"Apobado":"R"==t.data.status?"Rechazado por Técnico":"F"==t.data.status?"Finalizado":"Rechazado por Cliente")+"\n                    ")])],1)],1)]),a("br"),a("div",{staticClass:"content"},[a("h3",[t._v(t._s(t.data.issue))]),a("hr"),a("p",[t._v(t._s(t.data.description))]),a("hr"),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isImg,expression:"isImg"}]},t._l(t.images,function(e,s){return a("figure",{key:s,staticClass:"image is-4by3"},[a("img",{attrs:{src:t.api+"/uploads/support/"+e}})])}))])],1),a("footer",{staticClass:"modal-card-foot foot center"},[a("button",{staticClass:"button is-outlined is-rounded",attrs:{type:"button"},on:{click:function(e){t.$parent.close()}}},[t._v(t._s(t.global.button.close))])])])}),pt=[],ft={data:function(){return{global:k.text,images_support:[],data:"",images:[],isImg:!1,api:"https://server-andromeda.herokuapp.com"}},props:["dataSupport","nroSupport"],methods:{loadDataSupport:function(){for(var t in this.dataSupport)this.dataSupport[t].nro==this.nroSupport&&(this.data=this.dataSupport[t]);if(""!=this.data.images){var e=this.data.images.split(""),a=!1;for(var s in e)"|"==e[s]&&(a=!0);0==a?this.images.push(this.data.images):this.images=this.data.images.split("|"),this.isImg=!0}},convertDate:function(t){var e=t.split("-");return"".concat(e[2],"-").concat(e[1],"-").concat(e[0])}},created:function(){this.loadDataSupport()},watch:{$route:"loadDataSupport"}},ht=ft,mt=(a("WqV+"),Object(c["a"])(ht,dt,pt,!1,null,"464d0c16",null)),bt=mt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head has-text-centered"},[a("p",{staticClass:"modal-card-title"},[t._v(t._s(t.global.title.details)+" del Cliente")])]),a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"center"},[a("figure",{staticClass:"image is-96x96"},[a("img",{staticClass:"photo",attrs:{src:""==t.data.photo?"img/profile_default.svg":t.api+"/uploads/profile/"+t.data.photo}})])]),a("p",{staticClass:"title is-4 has-text-centered"},[t._v(t._s(t.data.name)+" "+t._s(t.data.lastname))]),a("div",{staticClass:"control center space"},[a("b-taglist",{attrs:{attached:""}},[a("b-tag",{attrs:{type:"is-dark",size:"is-small"}},[t._v("NIT")]),a("b-tag",{attrs:{type:"is-info",size:"is-small"}},[a("strong",[t._v(t._s(t.data.nit))])])],1)],1),a("div",{staticClass:"control center space"},[a("b-taglist",{attrs:{attached:""}},[a("b-tag",{attrs:{type:"is-dark",size:"is-small"}},[t._v("Email")]),a("b-tag",{attrs:{type:"is-success",size:"is-small"}},[a("strong",[t._v(t._s(t.data.email))])])],1)],1),a("div",{staticClass:"control center space"},[a("b-taglist",{attrs:{attached:""}},[a("b-tag",{attrs:{type:"is-dark",size:"is-small"}},[t._v("Telf.")]),a("b-tag",{attrs:{type:"is-warning",size:"is-small"}},[a("strong",[t._v(t._s(t.data.phone))])])],1)],1),a("div",{staticClass:"content"},[a("p",{staticClass:"title is-5 has-text-centered"},[t._v("Dirección: ")]),a("p",{staticClass:"has-text-centered"},[a("strong",[t._v("País: ")]),t._v("\n                "+t._s(t.data.address.country)+" |\n                "),a("strong",[t._v(" Estado: ")]),t._v(" \n                "+t._s(t.data.address.state)+"\n            ")]),a("p",{staticClass:"has-text-centered"},[a("strong",[t._v("Localidad: ")]),t._v("\n                "+t._s(t.data.address.location)+" |\n                "),a("strong",[t._v(" Descripción: ")]),t._v(" \n                "+t._s(t.data.address.description)+"\n            ")]),a("div")])]),a("footer",{staticClass:"modal-card-foot foot center"},[a("button",{staticClass:"button is-outlined is-rounded",attrs:{type:"button"},on:{click:function(e){t.$parent.close()}}},[t._v(t._s(t.global.button.close))])])])},gt=[],Ct={data:function(){return{global:k.text,images_support:[],data:"",images:[],isImg:!1,api:"https://server-andromeda.herokuapp.com"}},props:["idClient"],methods:{loadDataClient:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.get("/user/".concat(this.idClient),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(a){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!a.data.res){t.next=4;break}return s=a.data.user.id_infopersonal,t.next=4,g.get("/infopersonal/".concat(s),{headers:{Authorization:"bearer "+e.$cookie.get("token")}}).then(function(t){e.data=t.data.infoPersonal}).catch(function(t){alert(t)});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){alert(t)});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},created:function(){this.loadDataClient()},watch:{$route:"loadDataClient"}},_t=Ct,wt=(a("MFct"),Object(c["a"])(_t,vt,gt,!1,null,"729e7f88",null)),kt=wt.exports,yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head has-text-centered"},[a("p",{staticClass:"modal-card-title"},[t._v(t._s(t.global.title.assignSupport))])]),a("section",{staticClass:"modal-card-body"},[a("p",{staticClass:"title is-6 has-text-centered"},[t._v(t._s(t.global.input.toAssign+": "))]),a("b-field",{staticClass:"center"},[a("b-select",{attrs:{icon:"users","icon-pack":"fas",placeholder:"Nombre"},model:{value:t.isAssignSelect,callback:function(e){t.isAssignSelect=e},expression:"isAssignSelect"}},t._l(t.nameAdmin,function(e,s){return a("option",{key:s,domProps:{value:e.id}},[t._v("\n                    "+t._s(e.name+" "+e.lastname)+"\n                ")])}))],1)],1),a("footer",{staticClass:"modal-card-foot foot center"},[a("button",{staticClass:"button is-outlined is-rounded",attrs:{type:"button"},on:{click:function(e){t.$parent.close()}}},[t._v(t._s(t.global.button.close))]),a("button",{staticClass:"button is-primary is-rounded",on:{click:function(e){e.preventDefault(),t.saveAssignSupport()}}},[t._v(t._s(t.global.button.save))])])])},xt=[],St={data:function(){return{global:k.text,nameAdmin:[],isAssignSelect:"",supportSelect:""}},props:["support"],methods:{refreshData:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.supportSelect=this.support,t.next=3,g.get("/user/ref/".concat(this.$cookie.get("ref")),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(a){var s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!a.data.res){t.next=8;break}s=regeneratorRuntime.mark(function t(s){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.get("/infopersonal/".concat(a.data.user[s].id_infopersonal),{headers:{Authorization:"bearer "+e.$cookie.get("token")}}).then(function(t){t.data.res&&e.nameAdmin.push({id:a.data.user[s]._id,name:t.data.infoPersonal.name,lastname:t.data.infoPersonal.lastname})}).catch(function(t){alert(t)});case 2:case"end":return t.stop()}},t,this)}),t.t0=regeneratorRuntime.keys(a.data.user);case 3:if((t.t1=t.t0()).done){t.next=8;break}return i=t.t1.value,t.delegateYield(s(i),"t2",6);case 6:t.next=3;break;case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){alert(t)});case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),saveAssignSupport:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.supportSelect.status="A",this.supportSelect.assigned=this.isAssignSelect,t.next=4,g.put("/support/changestatus/".concat(this.supportSelect._id),this.supportSelect,{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!a.data.res){t.next=3;break}return t.next=3,g.post("/record",{nro_support:e.supportSelect.nro,activities:[]},{headers:{Authorization:"bearer "+e.$cookie.get("token")}}).then(function(t){t.data.res&&(e.$toast.open({message:"Solicitud Aprobada",type:"is-success"}),e.$emit("hijo:change"),e.$parent.close())}).catch(function(t){alert(t)});case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){alert(t)});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),validateInput:function(t){var e=!0;for(var a in t)if(""==t[a])return e=!1,y(this,"E007"),e;return e}},created:function(){this.refreshData()},watch:{$route:"refreshData"}},$t=St,At=(a("SbcH"),Object(c["a"])($t,yt,xt,!1,null,"8452c4aa",null)),Dt=At.exports,Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head has-text-centered"},[a("p",{staticClass:"modal-card-title"},[t._v(t._s(t.global.title.recordSupport))])]),a("section",{staticClass:"modal-card-body"},[a("b-tabs",{staticClass:"block",attrs:{position:"is-centered",type:"is-boxed"}},[a("b-tab-item",{attrs:{label:"Crear"}},[a("div",{staticClass:"createRecord"},[a("p",{staticClass:"title is-5 has-text-centered"},[t._v("Crear nueva actividad: ")]),a("b-field",{attrs:{"group-multiline":""}},[a("b-field",[a("b-datepicker",{attrs:{placeholder:"Fecha",icon:"calendar-alt","icon-pack":"fas",rounded:""},model:{value:t.activity.date,callback:function(e){t.$set(t.activity,"date",e)},expression:"activity.date"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:"Titulo",type:"text","icon-pack":"fas",icon:"space-shuttle",maxlength:"20",rounded:""},model:{value:t.activity.title,callback:function(e){t.$set(t.activity,"title",e)},expression:"activity.title"}})],1)],1),a("b-field",{attrs:{"group-multiline":""}},[a("b-field",[a("b-input",{attrs:{placeholder:"Nro. de Serie",type:"text","icon-pack":"fas",icon:"fingerprint",minlength:"10",maxlength:"30",rounded:""},model:{value:t.activity.nro_serie,callback:function(e){t.$set(t.activity,"nro_serie",e)},expression:"activity.nro_serie"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:"Marca",type:"text","icon-pack":"fas",icon:"desktop",maxlength:"20",rounded:""},model:{value:t.activity.make,callback:function(e){t.$set(t.activity,"make",e)},expression:"activity.make"}})],1),a("b-field",[a("b-input",{attrs:{placeholder:"Modelo",type:"text","icon-pack":"fas",icon:"server",maxlength:"20",rounded:""},model:{value:t.activity.model,callback:function(e){t.$set(t.activity,"model",e)},expression:"activity.model"}})],1)],1),a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.description,type:"textarea",minlength:"20",maxlength:"100",rounded:""},model:{value:t.activity.description,callback:function(e){t.$set(t.activity,"description",e)},expression:"activity.description"}})],1),a("div",{staticClass:"block center"},[a("b-radio",{attrs:{"native-value":"0"},model:{value:t.isHoursServ,callback:function(e){t.isHoursServ=e},expression:"isHoursServ"}},[t._v("\n                            Horas\n                        ")]),a("b-radio",{attrs:{"native-value":"1"},model:{value:t.isHoursServ,callback:function(e){t.isHoursServ=e},expression:"isHoursServ"}},[t._v("\n                            Servicio\n                        ")])],1),"0"==t.isHoursServ?a("div",[a("b-field",[a("b-input",{attrs:{placeholder:"Horas",type:"number","icon-pack":"fas",icon:"hourglass-start",maxlength:"2",rounded:""},model:{value:t.hours,callback:function(e){t.hours=e},expression:"hours"}})],1)],1):a("div",[a("b-field",[a("b-input",{attrs:{placeholder:"Servicio",type:"text","icon-pack":"fas",icon:"concierge-bell",value:t.service,rounded:"",disabled:""},model:{value:t.service,callback:function(e){t.service=e},expression:"service"}})],1)],1),a("br"),a("b-field",[a("p",{staticClass:"control has-text-centered"},[a("button",{staticClass:"button is-primary",on:{click:function(e){t.saveActivity()}}},[t._v("\n                            Guardar\n                            ")])])])],1)]),a("b-tab-item",{attrs:{label:"Visualizar"}},[0!=t.record.activities.length?a("div",t._l(t.record.activities,function(e,s){return a("b-collapse",{key:s,staticClass:"card",attrs:{open:!1},scopedSlots:t._u([{key:"trigger",fn:function(s){return a("div",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v("\n                                Fecha: "+t._s(e.date.substring(0,10))+"\n                            ")]),a("a",{staticClass:"card-header-icon"},[a("b-icon",{attrs:{pack:"fas",icon:s.open?"sort-down":"caret-up"}})],1)])}}])},[a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[a("strong",[t._v("Titulo: ")]),a("p",[t._v(t._s(e.title))]),a("strong",[t._v("Detalles: ")]),a("p",[t._v("Nro. de Serie: "+t._s(e.nro_serie)+" | Marca: "+t._s(e.make)+" | Modelo: "+t._s(e.model))]),a("strong",[t._v("Descripción: ")]),a("p",[t._v(t._s(e.description))])])]),a("footer",{staticClass:"card-footer"},[a("a",{staticClass:"card-footer-item"},[a("b-taglist",{attrs:{attached:""}},[a("b-tag",{attrs:{type:"is-dark"}},[t._v("Nro.")]),a("b-tag",{attrs:{type:"is-info"}},[t._v(t._s(e.nro_activity))])],1)],1),a("a",{staticClass:"card-footer-item"},[a("b-taglist",{attrs:{attached:""}},[a("b-tag",{attrs:{type:"is-dark"}},[t._v("Hrs/Serv")]),a("b-tag",{attrs:{type:"is-info"}},[t._v(t._s(e.hours_service))])],1)],1)])])})):a("div",[a("div",{staticClass:"content has-text-grey has-text-centered"},[a("p",[a("b-icon",{attrs:{pack:"fas",icon:"frown-open",size:"is-large"}})],1),a("p",[t._v("Nothing here.")])])])])],1)],1),a("footer",{staticClass:"modal-card-foot foot center"},[a("button",{staticClass:"button is-outlined is-rounded",attrs:{type:"button"},on:{click:function(e){t.$parent.close()}}},[t._v(t._s(t.global.button.close))])])])},Pt=[],Et={data:function(){return{global:k.text,isHoursServ:"0",hours:0,service:"Servicio",activity:{date:"",nro_activity:"",title:"",nro_serie:"",model:"",make:"",description:"",hours_service:""},record:"",date:new Date}},props:["nroSupport"],methods:{generateNro:function(){var t=new Date;return t.getTime()},refreshData:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.get("/record/nro/".concat(this.nroSupport),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){t.data.res&&(e.record=t.data.record[0])}).catch(function(t){alert(t)});case 2:return t.next=4,this.$log.debug(this.record);case 4:return t.next=6,this.$log.debug(this.activities);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),saveActivity:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.activity.nro_activity=this.generateNro(),"0"==this.isHoursServ?this.activity.hours_service=this.hours.toString():this.activity.hours_service=this.service,this.record.activities.push(this.activity),t.next=5,g.put("/record/".concat(this.record._id),this.record,{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){t.data.res&&(e.$toast.open({message:"Actividad Registrada",type:"is-success"}),e.clear(),e.refreshData())}).catch(function(t){alert(t)});case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),validateInput:function(t){var e=!0;for(var a in t)if(""==t[a])return e=!1,y(this,"E007"),e;return e},clear:function(){this.activity.date="",this.activity.nro_activity="",this.activity.title="",this.activity.nro_Serie="",this.activity.model="",this.activity.make="",this.activity.description="",this.activity.hours_service="",this.hours=""}},created:function(){this.refreshData()},watch:{$route:"refreshData"}},Mt=Et,jt=(a("O/99"),Object(c["a"])(Mt,Rt,Pt,!1,null,"8739d1a6",null)),Ft=jt.exports,Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"breadcrumb is-centered is-medium has-bullet-separator",attrs:{"aria-label":"breadcrumbs"}},[a("ul",[t._m(0),a("li",{staticClass:"is-active"},[a("a",{attrs:{href:"#"}},[a("span",{staticClass:"icon is-small"},[a("i",{class:"fas fa-"+t.icon,attrs:{"aria-hidden":"true"}})]),a("span",[t._v(t._s(t.name))])])])])])},zt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{attrs:{href:"#"}},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-home",attrs:{"aria-hidden":"true"}})]),a("span",[t._v("Panel")])])])}],Ot={data:function(){return{}},props:["name","icon"]},It=Ot,Lt=Object(c["a"])(It,Nt,zt,!1,null,null,null),Bt=Lt.exports,Ut={data:function(){return{isComponentModalDetailsSupportActive:!1,isComponentModalDetailsClientActive:!1,isComponentModalAssignSupportActive:!1,isComponentModalRecordSupportActive:!1,idClient:"",nroSupport:"",clients:[],global:k.text,data:[],isEmpty:!1,isBordered:!1,isStriped:!0,isNarrowed:!0,isHoverable:!0,isFocusable:!1,isLoading:!1,hasMobileCards:!0,selected:"",isPaginated:!0,isPaginationSimple:!1,defaultSortDirection:"asc",currentPage:1,perPage:7,showTypeTable:"0",dataForMe:[],selectedForMe:"",perPageForMe:4,currentPageForMe:1}},components:{ModalDetailsSupport:bt,ModalDetailsClient:kt,ModalAssignSupport:Dt,ModalRecordSupportAdmin:Ft,Breadcrub:Bt},methods:{listenSon:function(){this.refreshData()},deselect:function(){this.selected="",this.selectedForMe=""},refreshData:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.get("/support/all",{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){if(t.data.res)for(var a in e.data=t.data.support,e.dataForMe=[],e.data)e.data[a].assigned==e.$cookie.get("userId")&&e.dataForMe.push(e.data[a])}).catch(function(t){alert(t)});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),convertStatus:function(t){var e="";return"P"==t&&(e={name:"Pendiente",tag:"is-warning"}),"A"==t&&(e={name:"Aprobado",tag:"is-info"}),"R"==t&&(e={name:"Rechazado",tag:"is-danger"}),"C"==t&&(e={name:"Cancelado",tag:"is-dark"}),"F"==t&&(e={name:"Finalizado",tag:"is-success"}),e},loadDetailsSupport:function(t){this.nroSupport=t,this.isComponentModalDetailsSupportActive=!0},showAssignSupport:function(){this.isComponentModalAssignSupportActive=!0},showRecordSupportAdmin:function(t){this.nroSupport=t,this.isComponentModalRecordSupportActive=!0},loadClients:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:t.t0=regeneratorRuntime.keys(this.data);case 1:if((t.t1=t.t0()).done){t.next=7;break}return e=t.t1.value,t.next=5,g.get("/infopersonal/".concat(this.data[e].id_client),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){t.data.res&&a.clients.push(t.data.infoPersonal)}).catch(function(t){alert(t)});case 5:t.next=1;break;case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),loadDetailsClient:function(t){this.idClient=t,this.isComponentModalDetailsClientActive=!0},deny:function(){var t=this;""==this.selected?this.$toast.open({message:"Seleccione una fila",type:"is-warning"}):"C"==this.selected.status?this.$toast.open({message:"La solicitud fue cancelada por el cliente",type:"is-warning"}):"R"==this.selected.status?this.$toast.open({message:"La solicitud ya fue rechazada",type:"is-warning"}):"F"==this.selected.status?this.$toast.open({message:"La solicitud ya fue finalizada",type:"is-warning"}):this.$dialog.confirm({title:"Rechazar Solicitud",message:"¿Estás seguro de rechazar la solicitud de soporte nro. #".concat(this.selected.nro,"?"),confirmText:"Rechazar",type:"is-danger",hasIcon:!0,icon:"times",iconPack:"fas",onConfirm:function(){var e=Object(U["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.selected.status="R",e.next=3,g.put("/support/changestatus/".concat(t.selected._id),t.selected,{headers:{Authorization:"bearer "+t.$cookie.get("token")}}).then(function(e){e.data.res&&t.$toast.open({message:"Solicitud Rechazada",type:"is-success"})}).catch(function(t){alert(t)});case 3:return e.next=5,t.refreshData();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()})},approve:function(){var t=this;""==this.selected?this.$toast.open({message:"Seleccione una fila",type:"is-warning"}):"C"==this.selected.status?this.$toast.open({message:"La solicitud fue cancelada por el cliente",type:"is-warning"}):"A"==this.selected.status?this.$toast.open({message:"La solicitud ya fue aprobada",type:"is-warning"}):"F"==this.selected.status?this.$toast.open({message:"La solicitud ya fue finalizada",type:"is-warning"}):this.$dialog.confirm({title:"Aprobar Solicitud",message:"¿Estás seguro de aprobar la solicitud de soporte nro. #".concat(this.selected.nro,"?"),confirmText:"Aprobar",type:"is-success",hasIcon:!0,icon:"thumbs-up",iconPack:"fas",onConfirm:function(){var e=Object(U["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.showAssignSupport();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()})},finalize:function(){var t=this;""==this.selectedForMe?this.$toast.open({message:"Seleccione una fila",type:"is-warning"}):"C"==this.selectedForMe.status?this.$toast.open({message:"La solicitud fue cancelada por el cliente",type:"is-warning"}):"F"==this.selectedForMe.status?this.$toast.open({message:"La solicitud ya fue finalizada",type:"is-warning"}):"R"==this.selectedForMe.status?this.$toast.open({message:"La solicitud ya fue rechazada",type:"is-warning"}):this.$dialog.confirm({title:"Finalizar Soporte",message:"¿Estás seguro de finalizar el soporte nro. #".concat(this.selectedForMe.nro,"?"),confirmText:"Finalizar",type:"is-success",hasIcon:!0,icon:"plug",iconPack:"fas",onConfirm:function(){var e=Object(U["a"])(regeneratorRuntime.mark(function e(){var a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.selectedForMe.status="F",e.next=3,g.put("/support/changestatus/".concat(t.selectedForMe._id),t.selectedForMe,{headers:{Authorization:"bearer "+t.$cookie.get("token")}}).then(function(e){e.data.res&&t.$toast.open({message:"Soporte Finalizado",type:"is-success"})}).catch(function(t){alert(t)});case 3:return a=0,s=0,e.next=7,g.get("/record/hourserv/".concat(t.selectedForMe.nro),{headers:{Authorization:"bearer "+t.$cookie.get("token")}}).then(function(t){t.data.res&&(a=t.data.total_hours,s=t.data.total_service)}).catch(function(t){alert(t)});case 7:return e.next=9,g.post("/report",{nro:t.generateNro(),nro_support:t.selectedForMe.nro,total_hours:a.toString(),total_service:s.toString(),invoiced:"N",ref:t.$cookie.get("ref")},{headers:{Authorization:"bearer "+t.$cookie.get("token")}}).then(function(e){e.data.res&&t.$toast.open({message:"Reporte Creado",type:"is-success"})}).catch(function(t){alert(t)});case 9:return e.next=11,t.refreshData();case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()})},generateNro:function(){var t=new Date;return t.getTime()},convertDate:function(t){var e=t.split("-");return"".concat(e[2],"-").concat(e[1],"-").concat(e[0])}},created:function(){this.refreshData()},watch:{$route:"refreshData"}},Tt=Ut,qt=(a("+nqv"),Object(c["a"])(Tt,lt,ut,!1,null,"7932e65b",null)),Ht=qt.exports,Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("breadcrub",{attrs:{name:"Gestión de Servicios",icon:"wrench"}}),a("p",{staticClass:"buttons"},[a("a",{staticClass:"button is-success is-small is-rounded",on:{click:function(e){t.isComponentModalCreateSupportActive=!0}}},[a("span",[t._v(t._s(t.global.button.new))]),t._m(0)]),a("a",{staticClass:"button is-danger is-small is-rounded",on:{click:function(e){t.cancel()}}},[a("span",[t._v(t._s(t.global.button.cancel))]),t._m(1)]),a("a",{staticClass:"button is-info is-small is-rounded",on:{click:function(e){t.deselect()}}},[a("span",[t._v(t._s(t.global.button.deselect))]),t._m(2)])]),a("b-modal",{attrs:{active:t.isComponentModalCreateSupportActive,"has-modal-card":"",width:960},on:{"update:active":function(e){t.isComponentModalCreateSupportActive=e}}},[a("modal-create-support",{on:{"hijo:change":t.listenSon}})],1),a("b-modal",{attrs:{active:t.isComponentModalDetailsSupportActive,"has-modal-card":"",width:960},on:{"update:active":function(e){t.isComponentModalDetailsSupportActive=e}}},[a("modal-details-support",{attrs:{dataSupport:t.data,nroSupport:t.nroSupport}})],1),a("b-modal",{attrs:{active:t.isComponentModalDetailsClientActive,"has-modal-card":"",width:960},on:{"update:active":function(e){t.isComponentModalDetailsClientActive=e}}},[a("modal-details-client",{attrs:{idClient:t.idClient}})],1),a("b-table",{attrs:{data:t.isEmpty?[]:t.data,bordered:t.isBordered,striped:t.isStriped,narrowed:t.isNarrowed,hoverable:t.isHoverable,loading:t.isLoading,focusable:t.isFocusable,"mobile-cards":t.hasMobileCards,selected:t.selected,paginated:t.isPaginated,"per-page":t.perPage,"current-page":t.currentPage,"pagination-simple":t.isPaginationSimple,"default-sort-direction":t.defaultSortDirection},on:{"update:selected":function(e){t.selected=e},"update:currentPage":function(e){t.currentPage=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-table-column",{attrs:{field:"date",label:"Creado",centered:"",sortable:""}},[a("span",{staticClass:"tag is-primary"},[t._v("\n                    "+t._s(t.convertDate(e.row.createdAt.substring(0,10)))+"\n                ")])]),a("b-table-column",{attrs:{field:"issue",label:"Asunto",centered:"",sortable:""}},[t._v("\n                "+t._s(e.row.issue)+"\n            ")]),a("b-table-column",{attrs:{field:"assigned",label:"Asignado",centered:"",sortable:""}},[""!=e.row.assigned?a("a",{staticClass:"button is-success is-small",on:{click:function(a){t.loadDetailsClient(e.row.assigned)}}},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-user-astronaut"})])]):a("div",[a("a",{staticClass:"button is-danger is-small"},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-times"})])])])]),a("b-table-column",{attrs:{field:"status",label:"Estado",centered:"",sortable:""}},[a("b-tag",{attrs:{type:"P"==e.row.status?"is-warning":"A"==e.row.status?"is-info":"R"==e.row.status?"is-danger":"F"==e.row.status?"is-success":"is-dark"}},[t._v("\n\n                    "+t._s("P"==e.row.status?"Pendiente":"A"==e.row.status?"Aprobado":"R"==e.row.status?"Rechazado por Técnico":"F"==e.row.status?"Finalizada":"Rechazado por Cliente")+"\n                    \n                    ")])],1),a("b-table-column",{attrs:{field:"more",label:"Detalles",centered:"",sortable:""}},[a("a",{staticClass:"button is-info is-small",on:{click:function(a){t.loadDetailsSupport(e.row.nro)}}},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-info"})])])])]}}])},[a("template",{slot:"empty"},[a("section",{staticClass:"section"},[a("div",{staticClass:"content has-text-grey has-text-centered"},[a("p",[a("b-icon",{attrs:{pack:"fas",icon:"frown-open",size:"is-large"}})],1),a("p",[t._v("Nothing here.")])])])])],2)],1)},Gt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-plus"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-times"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-bolt"})])}],Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head has-text-centered"},[a("p",{staticClass:"modal-card-title"},[t._v(t._s(t.global.title.newsupport))])]),a("section",{staticClass:"modal-card-body"},[a("p",{staticClass:"title is-6"},[t._v(t._s(t.global.input.issue+": "))]),a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.issue,type:"text","icon-pack":"fas",icon:"user-astronaut",maxlength:"50",rounded:""},model:{value:t.support.issue,callback:function(e){t.$set(t.support,"issue",e)},expression:"support.issue"}})],1),a("p",{staticClass:"title is-6"},[t._v(t._s(t.global.input.description+": "))]),a("b-field",[a("b-input",{attrs:{type:"textarea",maxlength:"300",rounded:""},model:{value:t.support.description,callback:function(e){t.$set(t.support,"description",e)},expression:"support.description"}})],1),a("p",{staticClass:"title is-6"},[t._v(t._s(t.global.title.images+": "))]),a("div",{staticClass:"file has-name is-boxed center"},[a("label",{staticClass:"file-label"},[a("input",{ref:"images",staticClass:"file-input",attrs:{type:"file",multiple:"",name:"images",id:"images"},on:{change:function(e){t.handleFileUpload()}}}),t._m(0)])]),a("br"),a("div",{staticClass:"tags center"},t._l(t.images,function(e,s){return a("span",{key:s,staticClass:"tag is-primary"},[t._v("\n                "+t._s(e.name)+"\n                "),a("button",{staticClass:"delete is-small",attrs:{type:"button"},on:{click:function(e){t.deleteDropFile(s)}}})])}))],1),a("footer",{staticClass:"modal-card-foot foot center"},[a("button",{staticClass:"button is-outlined is-rounded",attrs:{type:"button"},on:{click:function(e){t.$parent.close()}}},[t._v(t._s(t.global.button.close))]),a("button",{staticClass:"button is-primary is-rounded",on:{click:function(e){e.preventDefault(),t.newSupport()}}},[t._v(t._s(t.global.button.send))])])])},Kt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"file-cta"},[a("span",{staticClass:"file-icon"},[a("i",{staticClass:"fas fa-upload"})]),a("span",{staticClass:"file-label"},[t._v("\n                    Choose a file…\n                ")])])}],Jt={data:function(){return{global:k.text,support:{id_client:this.$cookie.get("userId"),nro:"",issue:"",description:"",images:"",ref:this.$cookie.get("ref")},images:[],imagesShow:""}},props:["userData","userInfoData"],methods:{deleteDropFile:function(t){this.images.splice(t,1)},newSupport:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.support.nro=this.generateNro(),t.next=3,this.uploadImages();case 3:return this.support.images=t.sent,t.next=6,g.post("/support",this.support,{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){e.$log.debug(t.data),t.data.res?(y(e,"S002"),e.$emit("hijo:change"),e.$parent.close()):y(e,"E008")}).catch(function(t){alert(t)});case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),generateNro:function(){var t=new Date;return t.getTime()},uploadImages:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e,a,s,i,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:for(e=new Y.a,a=0;a<this.images.length;a++)s=this.images[a],e.append("images",s);return i="",t.next=5,g.post("/upsupport",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){if(t.data.res)for(var e in t.data.images)i=0==e?t.data.images[e].filename:i+"|"+t.data.images[e].filename}).catch(function(t){y(n,"E009"),n.$log.debug(t)});case 5:return t.abrupt("return",i);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),handleFileUpload:function(){for(var t in this.$refs.images.files)this.images.push(this.$refs.images.files[t]);this.images.pop(),this.images.pop()}}},Xt=Jt,Zt=(a("qZZC"),Object(c["a"])(Xt,Yt,Kt,!1,null,"74100dfb",null)),Wt=Zt.exports,Qt={data:function(){return{isComponentModalCreateSupportActive:!1,isComponentModalDetailsSupportActive:!1,isComponentModalDetailsClientActive:!1,idClient:"",nroSupport:"",global:k.text,data:[],isEmpty:!1,isBordered:!1,isStriped:!0,isNarrowed:!0,isHoverable:!0,isFocusable:!1,isLoading:!1,hasMobileCards:!0,selected:"",isPaginated:!0,isPaginationSimple:!1,defaultSortDirection:"asc",currentPage:1,perPage:7}},components:{ModalCreateSupport:Wt,ModalDetailsSupport:bt,ModalDetailsClient:kt,Breadcrub:Bt},methods:{listenSon:function(){this.refreshData()},deselect:function(){this.selected=""},refreshData:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.get("/support/ref/".concat(this.$cookie.get("ref")),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){t.data.res&&(e.data=t.data.support)}).catch(function(t){alert(t)});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),convertStatus:function(t){var e="";return"P"==t&&(e={name:"Pendiente",tag:"is-warning"}),"A"==t&&(e={name:"Aprobado",tag:"is-success"}),"R"==t&&(e={name:"Rechazado",tag:"is-danger"}),"C"==t&&(e={name:"Cancelado",tag:"is-dark"}),e},loadDetailsSupport:function(t){this.nroSupport=t,this.isComponentModalDetailsSupportActive=!0},loadDetailsClient:function(t){this.idClient=t,this.isComponentModalDetailsClientActive=!0},cancel:function(){var t=this;""==this.selected?this.$toast.open({message:"Seleccione una fila",type:"is-warning"}):this.$dialog.confirm({title:"Cancelar solicitud",message:"¿Estás seguro de cancelar la solicitud de soporte nro. #".concat(this.selected.nro,"?"),confirmText:"Cancelar",type:"is-danger",hasIcon:!0,icon:"times",iconPack:"fas",onConfirm:function(){var e=Object(U["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.selected.status="C",e.next=3,g.put("/support/changestatus/".concat(t.selected._id),t.selected,{headers:{Authorization:"bearer "+t.$cookie.get("token")}}).then(function(e){e.data.res&&t.$toast.open({message:"Solicitud Cancelada",type:"is-success"})}).catch(function(t){alert(t)});case 3:return e.next=5,t.refreshData();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()})},convertDate:function(t){var e=t.split("-");return"".concat(e[2],"-").concat(e[1],"-").concat(e[0])}},created:function(){this.refreshData()},watch:{$route:"refreshData"}},te=Qt,ee=(a("AnXT"),Object(c["a"])(te,Vt,Gt,!1,null,"c4679394",null)),ae=ee.exports,se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{ref:"pdf"},[a("breadcrub",{attrs:{name:"Gestión de Reportes",icon:"clipboard"}}),a("p",{staticClass:"buttons"},[a("a",{staticClass:"button is-success is-small is-rounded",on:{click:function(e){t.checkIn()}}},[a("span",[t._v("Facturar")]),t._m(0)]),a("a",{staticClass:"button is-info is-small is-rounded",on:{click:function(e){t.deselect()}}},[a("span",[t._v(t._s(t.global.button.deselect))]),t._m(1)]),a("a",[a("b-field",[a("b-radio-button",{attrs:{"native-value":"0",type:"is-info"},model:{value:t.showReport,callback:function(e){t.showReport=e},expression:"showReport"}},[a("b-icon",{attrs:{pack:"fas",icon:"eye"}}),a("span",[t._v("Todos")])],1),a("b-radio-button",{attrs:{"native-value":"1",type:"is-success"},model:{value:t.showReport,callback:function(e){t.showReport=e},expression:"showReport"}},[a("b-icon",{attrs:{pack:"fas",icon:"check-double"}}),a("span",[t._v("Facturados")])],1),a("b-radio-button",{attrs:{"native-value":"2",type:"is-danger"},model:{value:t.showReport,callback:function(e){t.showReport=e},expression:"showReport"}},[a("b-icon",{attrs:{pack:"fas",icon:"check"}}),a("span",[t._v("No Facturados")])],1)],1)],1)]),a("b-modal",{attrs:{active:t.isComponentModalisModalBillReportShowActive,"has-modal-card":"",width:960},on:{"update:active":function(e){t.isComponentModalisModalBillReportShowActive=e}}},[a("modal-bill-report",{attrs:{nroSupport:t.nroSupportBill,nroReport:t.nroReportBill,recordSelect:t.recordSelect}})],1),a("b-table",{attrs:{data:t.isEmpty?[]:"0"==t.showReport?t.reportsAll:"1"==t.showReport?t.reportsCheckIn:t.reportsNotCheckIn,bordered:t.isBordered,striped:t.isStriped,narrowed:t.isNarrowed,hoverable:t.isHoverable,loading:t.isLoading,focusable:t.isFocusable,"mobile-cards":t.hasMobileCards,selected:t.selected,paginated:t.isPaginated,"per-page":t.perPage,"current-page":t.currentPage,"pagination-simple":t.isPaginationSimple,"default-sort-direction":t.defaultSortDirection},on:{"update:selected":function(e){t.selected=e},"update:currentPage":function(e){t.currentPage=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-table-column",{attrs:{field:"nro",label:"Nro. de Reporte",centered:"",sortable:""}},[a("span",{staticClass:"tag is-success"},[t._v("\n                    "+t._s(e.row.nro)+"\n                ")])]),a("b-table-column",{attrs:{field:"nro_support",label:"Nro. de Soporte",centered:"",sortable:""}},[a("span",{staticClass:"tag is-info"},[t._v("\n                   "+t._s(e.row.nro_support)+"\n                ")])]),a("b-table-column",{attrs:{field:"total_hours",label:"Total Horas",centered:"",sortable:""}},[t._v("\n                "+t._s(e.row.total_hours)+"\n            ")]),a("b-table-column",{attrs:{field:"total_service",label:"Total Servicio",centered:"",sortable:""}},[t._v("\n                "+t._s(e.row.total_service)+"\n            ")]),a("b-table-column",{attrs:{field:"invoiced",label:"Facturado",centered:"",sortable:""}},[a("b-tag",{attrs:{type:"S"==e.row.invoiced?"is-success":"is-danger"}},[t._v("\n                "+t._s("S"==e.row.invoiced?"SI":"NO")+"\n                ")])],1),a("b-table-column",{attrs:{field:"pdf",label:"PDF",centered:"",sortable:""}},[a("a",{staticClass:"button is-warning is-small",on:{click:function(a){t.showPdf(e.row.nro_support+"|"+e.row.total_hours+"|"+e.row.total_service)}}},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-file-pdf"})])])])]}}])},[a("template",{slot:"empty"},[a("section",{staticClass:"section"},[a("div",{staticClass:"content has-text-grey has-text-centered"},[a("p",[a("b-icon",{attrs:{pack:"fas",icon:"frown-open",size:"is-large"}})],1),a("p",[t._v("Nothing here.")])])])])],2)],1)},ie=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-bell"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-bolt"})])}],ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-card"},[t._m(0),a("section",{staticClass:"modal-card-body"},[a("p",{staticClass:"title is-6"},[t._v("Introduce la cantidad y el precio de cada actividad: ")]),0!=t.record.activities.length?a("div",t._l(t.record.activities,function(e,s){return a("b-collapse",{key:s,staticClass:"card",attrs:{open:!1},scopedSlots:t._u([{key:"trigger",fn:function(s){return a("div",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[a("b-tag",{attrs:{type:"is-warning",size:"is-medium"}},[t._v("Fecha: "+t._s(e.date.substring(0,10)))])],1),a("a",{staticClass:"card-header-icon"},[a("b-icon",{attrs:{pack:"fas",icon:s.open?"sort-down":"caret-up"}})],1)])}}])},[a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[a("p",[a("strong",[t._v("Titulo: ")]),t._v(" "+t._s(e.title))]),a("p",[a("strong",[t._v("Descripción: ")]),t._v(t._s(e.description))]),a("p",[a("strong",[t._v("Tipo de Soporte: ")]),t._v(t._s("Servicio"==e.hours_service?e.hours_service:"Horas"))])]),a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-6"},[a("b-field",{attrs:{label:"Cantidad: "}},[a("b-input",{attrs:{placeholder:"Cantidad: ",type:"number","icon-pack":"fas",icon:"sort-numeric-up",maxlength:"2",rounded:"",disabled:""},on:{change:t.changePrice},model:{value:t.bill.details[s].cant,callback:function(e){t.$set(t.bill.details[s],"cant",e)},expression:"bill.details[index].cant"}})],1)],1),a("div",{staticClass:"column is-6"},[a("b-field",{attrs:{label:"Precio Unitario: "}},[a("b-input",{attrs:{placeholder:"Precio Unitario: ",type:"number","icon-pack":"fas",icon:"money-bill-alt",maxlength:"2",rounded:""},model:{value:t.bill.details[s].unit_price,callback:function(e){t.$set(t.bill.details[s],"unit_price",e)},expression:"bill.details[index].unit_price"}})],1)],1)])])])})):a("div",[a("div",{staticClass:"content has-text-grey has-text-centered"},[a("p",[a("b-icon",{attrs:{pack:"fas",icon:"frown-open",size:"is-large"}})],1),a("p",[t._v("Nothing here.")])])])]),a("footer",{staticClass:"modal-card-foot foot center"},[a("button",{staticClass:"button is-outlined is-rounded",attrs:{type:"button"},on:{click:function(e){t.$parent.close()}}},[t._v(t._s(t.global.button.close))]),a("button",{staticClass:"button is-primary is-rounded",on:{click:function(e){e.preventDefault(),t.saveBill()}}},[t._v(t._s(t.global.button.save))])])])},re=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"modal-card-head has-text-centered"},[a("p",{staticClass:"modal-card-title"},[t._v("Detalles de Factura")])])}],oe={data:function(){return{global:k.text,isHoursServ:"0",hours:0,service:"Servicio",activity:{date:"",nro_activity:"",title:"",details:"",description:"",hours_service:""},record:"",client:"",bill:{nro_report:"",id_client:"",details:[],sub_total:0,iva:0,total_amount:0,ref:""}}},props:["nroSupport","nroReport","recordSelect"],methods:{generateNro:function(){var t=new Date;return t.getTime()},changePrice:function(){for(var t in this.bill.details)this.bill.details[t].total=this.bill.details[t].cant*this.bill.details[t].unit_price,this.bill.sub_total=this.bill.sub_total+this.bill.details[t].total;this.bill.iva=this.bill.iva+.12*this.bill.sub_total,this.bill.total_amount=this.bill.iva+this.bill.sub_total},refreshData:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.get("/record/nro/".concat(this.nroSupport),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){if(t.data.res)for(var a in e.record=t.data.record[0],e.record.activities)e.bill.details.push({cant:"Servicio"==e.record.activities[a].hours_service?1:parseInt(e.record.activities[a].hours_service),description:e.record.activities[a].title,unit_price:0,total:0})}).catch(function(t){alert(t)});case 2:return t.next=4,this.$log.debug(this.record);case 4:return t.next=6,this.$log.debug(this.activities);case 6:return t.next=8,this.loadClient();case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),loadClient:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.get("/support/nro/".concat(this.nroSupport),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a.data.res&&(e.client=a.data.support);case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){alert(t)});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),saveBill:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.bill.ref=this.$cookie.get("ref"),this.bill.id_client=this.client,this.bill.nro_report=this.nroReport,this.changePrice(),this.recordSelect.invoiced="S",t.next=7,g.put("/report/changeinvoiced/".concat(this.recordSelect._id),this.recordSelect,{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!a.data.res){t.next=4;break}return e.$toast.open({message:"Reporte facturado",type:"is-success"}),t.next=4,g.post("/bill",e.bill,{headers:{Authorization:"bearer "+e.$cookie.get("token")}}).then(function(t){t.data.res&&(e.$toast.open({message:"Factura creada",type:"is-success"}),e.$parent.close())}).catch(function(t){alert(t)});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){alert(t)});case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),validateInput:function(t){var e=!0;for(var a in t)if(""==t[a])return e=!1,y(this,"E007"),e;return e},clear:function(){this.activity.date="",this.activity.nro_activity="",this.activity.title="",this.activity.details="",this.activity.description="",this.activity.hours_service="",this.hours=""}},created:function(){this.refreshData()},watch:{$route:"refreshData"}},ce=oe,le=(a("0OfD"),Object(c["a"])(ce,ne,re,!1,null,"3ab3b6fc",null)),ue=le.exports,de={data:function(){return{isComponentModalisModalBillReportShowActive:!1,global:k.text,isEmpty:!1,isBordered:!1,isStriped:!0,isNarrowed:!0,isHoverable:!0,isFocusable:!1,isLoading:!1,hasMobileCards:!0,selected:"",isPaginated:!0,isPaginationSimple:!1,defaultSortDirection:"asc",currentPage:1,perPage:7,showReport:"0",reportsAll:"",reportsCheckIn:[],reportsNotCheckIn:[],nroSupportBill:"",nroReportBill:"",recordSelect:""}},components:{ModalBillReport:ue,Breadcrub:Bt},methods:{listenSon:function(){this.refreshData()},deselect:function(){this.selected=""},refreshData:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.get("/report/ref/".concat(this.$cookie.get("ref")),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){if(t.data.res)for(var a in e.reportsAll=t.data.report,e.reportsCheckIn=[],e.reportsNotCheckIn=[],e.reportsAll)"S"==e.reportsAll[a].invoiced?e.reportsCheckIn.push(e.reportsAll[a]):e.reportsNotCheckIn.push(e.reportsAll[a])}).catch(function(t){alert(t)});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),showPdf:function(t){var e=this.$router.resolve({path:"/reportemp/".concat(t)});window.open(e.href,"_blank")},checkIn:function(){var t=this;""==this.selected?this.$toast.open({message:"Seleccione una fila",type:"is-warning"}):"S"==this.selected.invoiced?this.$toast.open({message:"El reporte ya fue facturado",type:"is-warning"}):this.$dialog.confirm({title:"Facturar Reporte",message:"¿Estás seguro de facturar el reporte nro. #".concat(this.selected.nro,"?"),confirmText:"Facturar",type:"is-success",hasIcon:!0,icon:"bell",iconPack:"fas",onConfirm:function(){var e=Object(U["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.nroSupportBill=t.selected.nro_support,t.nroReportBill=t.selected.nro,t.recordSelect=t.selected,t.isComponentModalisModalBillReportShowActive=!0;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()})}},created:function(){this.refreshData()},watch:{$route:"refreshData"}},pe=de,fe=(a("jUIg"),Object(c["a"])(pe,se,ie,!1,null,"5b4a2fe7",null)),he=fe.exports,me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("breadcrub",{attrs:{name:"Gestión de Usuarios",icon:"users"}}),a("p",{staticClass:"buttons"},[a("a",{staticClass:"button is-success is-small is-rounded",on:{click:function(e){t.loadCreateNewUser()}}},[a("span",[t._v(t._s(t.global.button.new))]),t._m(0)]),a("a",{staticClass:"button is-danger is-small is-rounded",on:{click:function(e){t.lock()}}},[a("span",[t._v(t._s(t.global.button.lock))]),t._m(1)]),a("a",{staticClass:"button is-warning is-small is-rounded",on:{click:function(e){t.unLock()}}},[a("span",[t._v(t._s(t.global.button.unlock))]),t._m(2)]),a("a",{staticClass:"button is-info is-small is-rounded",on:{click:function(e){t.deselect()}}},[a("span",[t._v(t._s(t.global.button.deselect))]),t._m(3)])]),a("b-modal",{attrs:{active:t.isComponentModalDetailsClientActive,"has-modal-card":"",width:960},on:{"update:active":function(e){t.isComponentModalDetailsClientActive=e}}},[a("modal-details-client",{attrs:{idClient:t.idClient}})],1),a("b-modal",{attrs:{active:t.isComponentModalCreateNewUserActive,"has-modal-card":"",width:960},on:{"update:active":function(e){t.isComponentModalCreateNewUserActive=e}}},[a("modal-create-new-user",{on:{"hijo:change":t.listenSon}})],1),a("b-table",{attrs:{data:t.isEmpty?[]:t.data,bordered:t.isBordered,striped:t.isStriped,narrowed:t.isNarrowed,hoverable:t.isHoverable,loading:t.isLoading,focusable:t.isFocusable,"mobile-cards":t.hasMobileCards,selected:t.selected,paginated:t.isPaginated,"per-page":t.perPage,"current-page":t.currentPage,"pagination-simple":t.isPaginationSimple,"default-sort-direction":t.defaultSortDirection},on:{"update:selected":function(e){t.selected=e},"update:currentPage":function(e){t.currentPage=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-table-column",{attrs:{field:"view",label:"Visualizar",centered:"",sortable:""}},[a("a",{staticClass:"button is-info is-small",on:{click:function(a){t.loadDetailsClient(e.row._id)}}},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-user-astronaut"})])])]),a("b-table-column",{attrs:{field:"date",label:"Creado",centered:"",sortable:""}},[a("span",{staticClass:"tag is-info"},[t._v("\n                    "+t._s(t.convertDate(e.row.createdAt.substring(0,10)))+"\n                ")])]),a("b-table-column",{attrs:{field:"username",label:"Usuario",centered:"",sortable:""}},[t._v("\n                "+t._s(e.row.username)+"\n            ")]),a("b-table-column",{attrs:{field:"rol",label:"Rol",centered:"",sortable:""}},[t._v("\n                "+t._s(e.row.rol)+"\n            ")]),a("b-table-column",{attrs:{field:"status",label:"Estado",centered:"",sortable:""}},[a("b-tag",{attrs:{type:1==e.row.status?"is-success":"is-danger"}},[t._v("\n                "+t._s(1==e.row.status?"Activo":"Bloqueado")+"\n                ")])],1)]}}])},[a("template",{slot:"empty"},[a("section",{staticClass:"section"},[a("div",{staticClass:"content has-text-grey has-text-centered"},[a("p",[a("b-icon",{attrs:{pack:"fas",icon:"frown-open",size:"is-large"}})],1),a("p",[t._v("Nothing here.")])])])])],2)],1)},be=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-plus"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-times"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-times"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-bolt"})])}],ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-card container"},[a("header",{staticClass:"modal-card-head has-text-centered"},[a("p",{staticClass:"modal-card-title"},[t._v(t._s(t.global.title.newuser))])]),a("section",{staticClass:"modal-card-body"},[a("p",{staticClass:"title is-6"},[t._v(t._s(t.global.input.name+": "))]),a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.name,type:"text","icon-pack":"fas",icon:"user-circle",maxlength:"20",rounded:""},model:{value:t.register.name,callback:function(e){t.$set(t.register,"name",e)},expression:"register.name"}})],1),a("p",{staticClass:"title is-6"},[t._v(t._s(t.global.input.nit+": "))]),a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.nit,type:"text","icon-pack":"fas",icon:"address-card",maxlength:"20",rounded:""},model:{value:t.register.nit,callback:function(e){t.$set(t.register,"nit",e)},expression:"register.nit"}})],1),a("p",{staticClass:"title is-6"},[t._v(t._s(t.global.input.email+": "))]),a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.email,type:"email","icon-pack":"fas",icon:"at",maxlength:"50",rounded:""},model:{value:t.register.email,callback:function(e){t.$set(t.register,"email",e)},expression:"register.email"}})],1),a("p",{staticClass:"title is-6"},[t._v(t._s(t.global.input.username+": "))]),a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.username,type:"text","icon-pack":"fas",icon:"user",maxlength:"12",rounded:""},model:{value:t.register.username,callback:function(e){t.$set(t.register,"username",e)},expression:"register.username"}})],1),a("p",{staticClass:"title is-6"},[t._v(t._s(t.global.input.password+": "))]),a("b-field",[a("b-input",{attrs:{placeholder:t.global.input.password,type:"password","icon-pack":"fas",icon:"key","password-reveal":"",rounded:""},model:{value:t.register.password,callback:function(e){t.$set(t.register,"password",e)},expression:"register.password"}})],1)],1),a("footer",{staticClass:"modal-card-foot foot center"},[a("button",{staticClass:"button is-outlined is-rounded",attrs:{type:"button"},on:{click:function(e){t.$parent.close()}}},[t._v(t._s(t.global.button.close))]),a("button",{staticClass:"button is-primary is-rounded",on:{click:function(e){e.preventDefault(),t.newUser()}}},[t._v(t._s(t.global.button.save))])])])},ge=[],Ce={data:function(){return{global:k.text,register:{name:"",nit:"",email:"",username:"",password:"",type_user:this.$cookie.get("type_user"),ref:this.$cookie.get("ref")}}},methods:{newUser:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.$log.debug(this.validateInput(this.register)),!this.validateInput(this.register)){t.next=4;break}return t.next=4,g.post("/others/newuserforauth",this.register,{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){e.$log.debug(t.data),t.data.res?(y(e,"S001"),e.$emit("hijo:change"),e.$parent.close()):y(e,t.data.err)}).catch(function(t){alert(t)});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),validateInput:function(t){var e=!0;for(var a in t)if(""==t[a])return e=!1,y(this,"E007"),e;return e}}},_e=Ce,we=(a("HEpx"),Object(c["a"])(_e,ve,ge,!1,null,"bfb93248",null)),ke=we.exports,ye={data:function(){return{isComponentModalDetailsClientActive:!1,isComponentModalCreateNewUserActive:!1,global:k.text,data:[],isEmpty:!1,isBordered:!1,isStriped:!0,isNarrowed:!0,isHoverable:!0,isFocusable:!1,isLoading:!1,hasMobileCards:!0,selected:"",isPaginated:!0,isPaginationSimple:!1,defaultSortDirection:"asc",currentPage:1,perPage:7}},components:{ModalDetailsClient:kt,ModalCreateNewUser:ke,Breadcrub:Bt},methods:{listenSon:function(){this.refreshData()},deselect:function(){this.selected=""},refreshData:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.get("/user/ref/".concat(this.$cookie.get("ref")),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){t.data.res&&(e.data=t.data.user)}).catch(function(t){alert(t)});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),loadDetailsClient:function(t){this.idClient=t,this.isComponentModalDetailsClientActive=!0},loadCreateNewUser:function(){this.isComponentModalCreateNewUserActive=!0},lock:function(){var t=this;""==this.selected?this.$toast.open({message:"Seleccione una fila",type:"is-warning"}):this.$dialog.confirm({title:"Bloquear Usuario",message:"¿Estás seguro de bloquear el usuario: ".concat(this.selected.username,"?"),confirmText:"Bloquear",type:"is-danger",hasIcon:!0,icon:"lock",iconPack:"fas",onConfirm:function(){var e=Object(U["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.selected.status=!1,e.next=3,g.put("/user/changestatus/".concat(t.selected._id),t.selected,{headers:{Authorization:"bearer "+t.$cookie.get("token")}}).then(function(e){e.data.res&&t.$toast.open({message:"Usuario Bloqueado",type:"is-success"})}).catch(function(t){alert(t)});case 3:return e.next=5,t.refreshData();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()})},unLock:function(){var t=this;""==this.selected?this.$toast.open({message:"Seleccione una fila",type:"is-warning"}):this.$dialog.confirm({title:"Desbloquear Usuario",message:"¿Estás seguro de desbloquear el usuario: ".concat(this.selected.username,"?"),confirmText:"Desbloquear",type:"is-warning",hasIcon:!0,icon:"unlock",iconPack:"fas",onConfirm:function(){var e=Object(U["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.selected.status=!0,e.next=3,g.put("/user/changestatus/".concat(t.selected._id),t.selected,{headers:{Authorization:"bearer "+t.$cookie.get("token")}}).then(function(e){e.data.res&&t.$toast.open({message:"Usuario Desbloqueado",type:"is-success"})}).catch(function(t){alert(t)});case 3:return e.next=5,t.refreshData();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()})},convertDate:function(t){var e=t.split("-");return"".concat(e[2],"-").concat(e[1],"-").concat(e[0])}},created:function(){this.refreshData()},watch:{$route:"refreshData"}},xe=ye,Se=(a("Y7bs"),Object(c["a"])(xe,me,be,!1,null,"07300aa1",null)),$e=Se.exports,Ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("breadcrub",{attrs:{name:"Agenda",icon:"calendar-alt"}}),a("p",{staticClass:"buttons"},[a("a",{staticClass:"button is-success is-small is-rounded",on:{click:function(e){t.newEvent()}}},[a("span",[t._v("Nuevo")]),t._m(0)])]),a("vue-event-calendar",{attrs:{events:t.data}}),a("b-modal",{attrs:{active:t.isComponentModalNewEventActive,"has-modal-card":"",width:960},on:{"update:active":function(e){t.isComponentModalNewEventActive=e}}},[a("modal-new-event",{on:{"hijo:change":t.listenSon}})],1)],1)},De=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-plus"})])}],Re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-card container"},[t._m(0),a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"temp"},[a("b-input",{attrs:{placeholder:"Titulo",type:"text","icon-pack":"fas",icon:"shuttle-van",maxlength:"20",rounded:""},model:{value:t.calendar.title,callback:function(e){t.$set(t.calendar,"title",e)},expression:"calendar.title"}}),a("b-input",{attrs:{placeholder:"Descripción",type:"textarea",maxlength:"100",rounded:""},model:{value:t.calendar.description,callback:function(e){t.$set(t.calendar,"description",e)},expression:"calendar.description"}}),a("b-field",[a("b-datepicker",{attrs:{placeholder:"Fecha",icon:"calendar-alt","icon-pack":"fas",rounded:""},model:{value:t.calendar.date,callback:function(e){t.$set(t.calendar,"date",e)},expression:"calendar.date"}})],1),a("b-field",[a("b-select",{attrs:{placeholder:"Invitado",icon:"user",expanded:"","icon-pack":"fas",rounded:""},model:{value:t.calendar.invited,callback:function(e){t.$set(t.calendar,"invited",e)},expression:"calendar.invited"}},t._l(t.invited,function(e,s){return a("option",{key:s,domProps:{value:e.id}},[t._v(t._s(e.fullname))])}))],1)],1)]),a("footer",{staticClass:"modal-card-foot foot center"},[a("button",{staticClass:"button is-outlined is-rounded",attrs:{type:"button"},on:{click:function(e){t.$parent.close()}}},[t._v(t._s(t.global.button.close))]),a("button",{staticClass:"button is-primary is-rounded",on:{click:function(e){e.preventDefault(),t.newEvent()}}},[t._v(t._s(t.global.button.save))])])])},Pe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"modal-card-head has-text-centered"},[a("p",{staticClass:"modal-card-title"},[t._v("Nuevo Evento")])])}],Ee={data:function(){return{global:k.text,calendar:{nro:"",title:"",description:"",date:"",invited:"",host:""},invited:[]}},methods:{newEvent:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.calendar.nro=this.generateNro(),this.calendar.host=this.$cookie.get("infopersonalId"),!this.validateInput(this.calendar)){t.next=5;break}return t.next=5,g.post("/calendar",this.calendar,{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){t.data.res&&(y(e,"S005"),e.$emit("hijo:change"),e.$parent.close())}).catch(function(t){alert(t)});case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),validateInput:function(t){var e=!0;for(var a in t)if(""==t[a])return e=!1,y(this,"E007"),e;return e},generateNro:function(){var t=new Date;return t.getTime()},loadInvited:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.get("/infopersonal/all",{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){if(t.data.res){var a=t.data.infoPersonal;for(var s in a){var i={id:"",fullname:""};i.id=a[s]._id,i.fullname=a[s].name+" "+a[s].lastname,e.invited.push(i)}}}).catch(function(t){alert(t)});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},created:function(){this.loadInvited()},watch:{$route:"loadInvited"}},Me=Ee,je=(a("UL5N"),Object(c["a"])(Me,Re,Pe,!1,null,"0c46d6b5",null)),Fe=je.exports,Ne={data:function(){return{data:[],demoEvents:[{date:"2018/08/19",title:"Foo",desc:"Nada de nada jajajajaja"},{date:"2016/12/15",title:"Bar",desc:"Nada de nada jajajajaja"}],isComponentModalNewEventActive:!1}},components:{Breadcrub:Bt,ModalNewEvent:Fe},methods:{newEvent:function(){this.isComponentModalNewEventActive=!0},listenSon:function(){this.loadData()},loadData:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.data=[],t.next=3,g.get("/calendar/host/".concat(this.$cookie.get("infopersonalId")),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){if(t.data.res){var a=t.data.calendar;for(var s in a){var i={date:"",title:"",desc:""},n=a[s].date.substring(0,10).split("-");i.date=n[0]+"/"+n[1]+"/"+n[2],i.title=a[s].title,i.desc=a[s].description,e.data.push(i)}}}).catch(function(t){alert(t)});case 3:return t.next=5,g.get("/calendar/invited/".concat(this.$cookie.get("infopersonalId")),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){if(t.data.res){var a=t.data.calendar;for(var s in a){var i={date:"",title:"",desc:""},n=a[s].date.substring(0,10).split("-");i.date=n[0]+"/"+n[1]+"/"+n[2],i.title=a[s].title,i.desc=a[s].description,e.data.push(i)}}}).catch(function(t){alert(t)});case 5:this.$log.debug(this.data);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},created:function(){this.loadData()},watch:{$route:"loadData"}},ze=Ne,Oe=(a("Mge8"),Object(c["a"])(ze,Ae,De,!1,null,null,null)),Ie=Oe.exports,Le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{ref:"pdf"},[a("breadcrub",{attrs:{name:"Gestión de Facturas",icon:"dollar-sign"}}),a("p",{staticClass:"buttons"},[a("a",{staticClass:"button is-info is-small is-rounded",on:{click:function(e){t.deselect()}}},[a("span",[t._v(t._s(t.global.button.deselect))]),t._m(0)]),a("a",[a("b-field",[a("b-radio-button",{attrs:{"native-value":"0",type:"is-info"},model:{value:t.showBill,callback:function(e){t.showBill=e},expression:"showBill"}},[a("b-icon",{attrs:{pack:"fas",icon:"eye"}}),a("span",[t._v("Todos")])],1),a("b-radio-button",{attrs:{"native-value":"1",type:"is-success"},model:{value:t.showBill,callback:function(e){t.showBill=e},expression:"showBill"}},[a("b-icon",{attrs:{pack:"fas",icon:"check-double"}}),a("span",[t._v("Pagados")])],1),a("b-radio-button",{attrs:{"native-value":"2",type:"is-danger"},model:{value:t.showBill,callback:function(e){t.showBill=e},expression:"showBill"}},[a("b-icon",{attrs:{pack:"fas",icon:"check"}}),a("span",[t._v("No Pagados")])],1)],1)],1)]),a("b-modal",{attrs:{active:t.isComponentModalDetailsClientActive,"has-modal-card":"",width:960},on:{"update:active":function(e){t.isComponentModalDetailsClientActive=e}}},[a("modal-details-client",{attrs:{idClient:t.idClient}})],1),a("b-modal",{attrs:{active:t.isComponentModalDetailsPaymentActive,"has-modal-card":"",width:960},on:{"update:active":function(e){t.isComponentModalDetailsPaymentActive=e}}},[a("modal-details-payment",{attrs:{idBill:t.billShow}})],1),a("b-table",{attrs:{data:t.isEmpty?[]:"0"==t.showBill?t.billAll:"1"==t.showBill?t.billYes:t.billNot,bordered:t.isBordered,striped:t.isStriped,narrowed:t.isNarrowed,hoverable:t.isHoverable,loading:t.isLoading,focusable:t.isFocusable,"mobile-cards":t.hasMobileCards,selected:t.selected,paginated:t.isPaginated,"per-page":t.perPage,"current-page":t.currentPage,"pagination-simple":t.isPaginationSimple,"default-sort-direction":t.defaultSortDirection},on:{"update:selected":function(e){t.selected=e},"update:currentPage":function(e){t.currentPage=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-table-column",{attrs:{field:"nro",label:"Nro.",centered:"",sortable:""}},[a("span",{staticClass:"tag is-success"},[t._v("\n                    "+t._s(e.row.nro)+"\n                ")])]),a("b-table-column",{attrs:{field:"Cliente",label:"Cliente",centered:"",sortable:""}},[a("a",{staticClass:"button is-info is-small",on:{click:function(a){t.loadDetailsClient(e.row.id_client)}}},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-user-astronaut"})])])]),a("b-table-column",{attrs:{field:"SubTotal",label:"SubTotal",centered:"",sortable:""}},[t._v("\n                "+t._s(e.row.sub_total)+"\n            ")]),a("b-table-column",{attrs:{field:"IVA",label:"IVA",centered:"",sortable:""}},[t._v("\n                "+t._s(e.row.iva)+"\n            ")]),a("b-table-column",{attrs:{field:"Total",label:"Total",centered:"",sortable:""}},[t._v("\n                "+t._s(e.row.total_amount)+"\n            ")]),a("b-table-column",{attrs:{field:"status",label:"Pago",centered:"",sortable:""}},[a("b-tag",{attrs:{type:"S"==e.row.status?"is-success":"is-danger"}},[t._v("\n                "+t._s("S"==e.row.status?"SI":"NO")+"\n                ")])],1),a("b-table-column",{attrs:{field:"pdf",label:"PDF",centered:"",sortable:""}},[a("a",{staticClass:"button is-warning is-small",on:{click:function(a){t.showBillPdf(e.row.nro)}}},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-file-pdf"})])])]),a("b-table-column",{attrs:{field:"pdf",label:"Comprobante",centered:"",sortable:""}},["S"==e.row.status?a("a",{staticClass:"button is-success is-small",on:{click:function(a){t.showPayment(e.row._id)}}},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-file-pdf"})])]):t._e(),"N"==e.row.status?a("a",{staticClass:"button is-dark is-small"},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-file-pdf"})])]):t._e()])]}}])},[a("template",{slot:"empty"},[a("section",{staticClass:"section"},[a("div",{staticClass:"content has-text-grey has-text-centered"},[a("p",[a("b-icon",{attrs:{pack:"fas",icon:"frown-open",size:"is-large"}})],1),a("p",[t._v("Nothing here.")])])])])],2)],1)},Be=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-bolt"})])}],Ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-card"},[t._m(0),a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"center"},[a("b-field",{attrs:{grouped:"","group-multiline":""}},[a("div",{staticClass:"control"},[a("b-taglist",{attrs:{attached:""}},[a("b-tag",{attrs:{type:"is-dark",size:"is-medium"}},[t._v("Nro.")]),a("b-tag",{attrs:{type:"is-info",size:"is-medium"}},[t._v(t._s(t.data.nro))])],1)],1),a("div",{staticClass:"control"},[a("b-taglist",{attrs:{attached:""}},[a("b-tag",{attrs:{type:"is-dark",size:"is-medium"}},[t._v(t._s(t.global.title.date))]),a("b-tag",{attrs:{type:"is-primary",size:"is-medium"}},[t._v(t._s(t.convertDate(t.data.createdAt.substring(0,10))))])],1)],1)])],1),a("br"),a("div",{staticClass:"content"},[a("p",{staticClass:"title is-6"},[t._v("Metodo de Pago: "+t._s("visa"==t.data.method?"Visa":"master"==t.data.method?"Master":"transfer"==t.data.method?"Transferencia":"Deposito")+" ")]),a("p",{staticClass:"title is-6"},[t._v("Referencia: "+t._s(t.data.ref)+" ")]),a("p",{staticClass:"title is-6"},[t._v("Captura de Pantalla: ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isImg,expression:"isImg"}]},t._l(t.images,function(e,s){return a("figure",{key:s,staticClass:"image is-4by3"},[a("img",{attrs:{src:t.api+"/uploads/payment/"+e}})])}))])]),a("footer",{staticClass:"modal-card-foot foot center"},[a("button",{staticClass:"button is-outlined is-rounded",attrs:{type:"button"},on:{click:function(e){t.$parent.close()}}},[t._v(t._s(t.global.button.close))])])])},Te=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"modal-card-head has-text-centered"},[a("p",{staticClass:"modal-card-title"},[t._v("Comprobante de Pago")])])}],qe={data:function(){return{global:k.text,images_support:[],data:"",images:[],isImg:!1,api:"https://server-andromeda.herokuapp.com"}},props:["idBill"],methods:{loadDataSupport:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e,a,s,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.get("/payment/bill/".concat(this.idBill),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){t.data.res&&(i.data=t.data.payment[0])}).catch(function(t){alert(t)});case 2:if(this.$log.debug(this.data),""!=this.data.images){for(s in e=this.data.images.split(""),a=!1,e)"|"==e[s]&&(a=!0);0==a?this.images.push(this.data.images):this.images=this.data.images.split("|"),this.isImg=!0}case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),convertDate:function(t){var e=t.split("-");return"".concat(e[2],"-").concat(e[1],"-").concat(e[0])}},created:function(){this.loadDataSupport()},watch:{$route:"loadDataSupport"}},He=qe,Ve=(a("Q71u"),Object(c["a"])(He,Ue,Te,!1,null,"12222359",null)),Ge=Ve.exports,Ye={data:function(){return{isComponentModalDetailsClientActive:!1,isComponentModalDetailsPaymentActive:!1,global:k.text,isEmpty:!1,isBordered:!1,isStriped:!0,isNarrowed:!0,isHoverable:!0,isFocusable:!1,isLoading:!1,hasMobileCards:!0,selected:"",isPaginated:!0,isPaginationSimple:!1,defaultSortDirection:"asc",currentPage:1,perPage:7,showBill:"0",idClient:"",billAll:"",billYes:[],billNot:[],billShow:""}},components:{ModalDetailsClient:kt,Breadcrub:Bt,ModalDetailsPayment:Ge},methods:{listenSon:function(){this.refreshData()},deselect:function(){this.selected=""},loadDetailsClient:function(t){this.idClient=t,this.isComponentModalDetailsClientActive=!0},refreshData:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.get("/bill/ref/".concat(this.$cookie.get("ref")),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){if(t.data.res)for(var a in e.billAll=t.data.bill,e.billYes=[],e.billNot=[],e.billAll)"S"==e.billAll[a].status?e.billYes.push(e.billAll[a]):e.billNot.push(e.billAll[a])}).catch(function(t){alert(t)});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),showBillPdf:function(t){var e=this.$router.resolve({path:"/bill/".concat(t)});window.open(e.href,"_blank")},showPayment:function(t){this.billShow=t,this.isComponentModalDetailsPaymentActive=!0}},created:function(){this.refreshData()},watch:{$route:"refreshData"}},Ke=Ye,Je=(a("6FSB"),Object(c["a"])(Ke,Le,Be,!1,null,"1a9aff3a",null)),Xe=Je.exports,Ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{ref:"pdf"},[a("breadcrub",{attrs:{name:"Gestión de Facturas",icon:"dollar-sign"}}),a("p",{staticClass:"buttons"},[a("a",{staticClass:"button is-success is-small is-rounded",on:{click:function(e){t.pay()}}},[a("span",[t._v("Pagar")]),t._m(0)]),a("a",{staticClass:"button is-info is-small is-rounded",on:{click:function(e){t.deselect()}}},[a("span",[t._v(t._s(t.global.button.deselect))]),t._m(1)]),a("a",[a("b-field",[a("b-radio-button",{attrs:{"native-value":"0",type:"is-info"},model:{value:t.showBill,callback:function(e){t.showBill=e},expression:"showBill"}},[a("b-icon",{attrs:{pack:"fas",icon:"eye"}}),a("span",[t._v("Todos")])],1),a("b-radio-button",{attrs:{"native-value":"1",type:"is-success"},model:{value:t.showBill,callback:function(e){t.showBill=e},expression:"showBill"}},[a("b-icon",{attrs:{pack:"fas",icon:"check-double"}}),a("span",[t._v("Pagados")])],1),a("b-radio-button",{attrs:{"native-value":"2",type:"is-danger"},model:{value:t.showBill,callback:function(e){t.showBill=e},expression:"showBill"}},[a("b-icon",{attrs:{pack:"fas",icon:"check"}}),a("span",[t._v("No Pagados")])],1)],1)],1)]),a("b-modal",{attrs:{active:t.isComponentModalDetailsClientActive,"has-modal-card":"",width:960},on:{"update:active":function(e){t.isComponentModalDetailsClientActive=e}}},[a("modal-details-client",{attrs:{idClient:t.idClient}})],1),a("b-modal",{attrs:{active:t.isComponentModalPayForClientActive,"has-modal-card":"",width:960},on:{"update:active":function(e){t.isComponentModalPayForClientActive=e}}},[a("modal-pay-for-client",{attrs:{bill:t.billData},on:{"hijo:change":t.listenSon}})],1),a("b-table",{attrs:{data:t.isEmpty?[]:"0"==t.showBill?t.billAll:"1"==t.showBill?t.billYes:t.billNot,bordered:t.isBordered,striped:t.isStriped,narrowed:t.isNarrowed,hoverable:t.isHoverable,loading:t.isLoading,focusable:t.isFocusable,"mobile-cards":t.hasMobileCards,selected:t.selected,paginated:t.isPaginated,"per-page":t.perPage,"current-page":t.currentPage,"pagination-simple":t.isPaginationSimple,"default-sort-direction":t.defaultSortDirection},on:{"update:selected":function(e){t.selected=e},"update:currentPage":function(e){t.currentPage=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-table-column",{attrs:{field:"nro",label:"Nro. Factura",centered:"",sortable:""}},[a("span",{staticClass:"tag is-success"},[t._v("\n                    "+t._s(e.row.nro)+"\n                ")])]),a("b-table-column",{attrs:{field:"pdf",label:"PDF Reporte",centered:"",sortable:""}},[a("a",{staticClass:"button is-warning is-small",on:{click:function(a){t.showReport(e.row.nro_report)}}},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-file-pdf"})])])]),a("b-table-column",{attrs:{field:"SubTotal",label:"SubTotal",centered:"",sortable:""}},[t._v("\n                "+t._s(e.row.sub_total)+"\n            ")]),a("b-table-column",{attrs:{field:"IVA",label:"IVA",centered:"",sortable:""}},[t._v("\n                "+t._s(e.row.iva)+"\n            ")]),a("b-table-column",{attrs:{field:"Total",label:"Total",centered:"",sortable:""}},[t._v("\n                "+t._s(e.row.total_amount)+"\n            ")]),a("b-table-column",{attrs:{field:"status",label:"Pago",centered:"",sortable:""}},[a("b-tag",{attrs:{type:"S"==e.row.status?"is-success":"is-danger"}},[t._v("\n                "+t._s("S"==e.row.status?"SI":"NO")+"\n                ")])],1),a("b-table-column",{attrs:{field:"pdf",label:"PDF Factura",centered:"",sortable:""}},[a("a",{staticClass:"button is-warning is-small",on:{click:function(a){t.showBillPdf(e.row.nro)}}},[a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-file-pdf"})])])])]}}])},[a("template",{slot:"empty"},[a("section",{staticClass:"section"},[a("div",{staticClass:"content has-text-grey has-text-centered"},[a("p",[a("b-icon",{attrs:{pack:"fas",icon:"frown-open",size:"is-large"}})],1),a("p",[t._v("Nothing here.")])])])])],2)],1)},We=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-dollar-sign"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"fas fa-bolt"})])}],Qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-card"},[t._m(0),a("section",{staticClass:"modal-card-body"},[a("p",{staticClass:"title is-6"},[t._v("Metodo de Pago: ")]),a("div",{staticClass:"center"},[a("b-field",[a("b-checkbox-button",{attrs:{"native-value":"visa",type:"is-success"},model:{value:t.method,callback:function(e){t.method=e},expression:"method"}},[a("b-icon",{attrs:{pack:"fas",icon:"credit-card"}}),a("span",[t._v("Visa")])],1),a("b-checkbox-button",{attrs:{"native-value":"master",type:"is-info"},model:{value:t.method,callback:function(e){t.method=e},expression:"method"}},[a("b-icon",{attrs:{pack:"fas",icon:"credit-card"}}),a("span",[t._v("Master")])],1),a("b-checkbox-button",{attrs:{"native-value":"transfer",type:"is-success"},model:{value:t.method,callback:function(e){t.method=e},expression:"method"}},[a("b-icon",{attrs:{pack:"fas",icon:"money-bill-alt"}}),a("span",[t._v("Transferencia")])],1),a("b-checkbox-button",{attrs:{"native-value":"deposit",type:"is-info"},model:{value:t.method,callback:function(e){t.method=e},expression:"method"}},[a("b-icon",{attrs:{pack:"fas",icon:"money-bill-alt"}}),a("span",[t._v("Deposito")])],1)],1)],1),a("br"),t._m(1),a("b-field",[a("b-input",{attrs:{placeholder:"Referencia",type:"text","icon-pack":"fas",icon:"barcode",maxlength:"30",rounded:""},model:{value:t.payment.ref,callback:function(e){t.$set(t.payment,"ref",e)},expression:"payment.ref"}})],1),a("p",{staticClass:"title is-6"},[t._v("Capturas de Pantalla: ")]),a("div",{staticClass:"file has-name is-boxed center"},[a("label",{staticClass:"file-label"},[a("input",{ref:"images",staticClass:"file-input",attrs:{type:"file",multiple:"",name:"images",id:"images"},on:{change:function(e){t.handleFileUpload()}}}),t._m(2)])]),a("br"),a("div",{staticClass:"tags center"},t._l(t.images,function(e,s){return a("span",{key:s,staticClass:"tag is-primary"},[t._v("\n                "+t._s(e.name)+"\n                "),a("button",{staticClass:"delete is-small",attrs:{type:"button"},on:{click:function(e){t.deleteDropFile(s)}}})])}))],1),a("footer",{staticClass:"modal-card-foot foot center"},[a("button",{staticClass:"button is-outlined is-rounded",attrs:{type:"button"},on:{click:function(e){t.$parent.close()}}},[t._v(t._s(t.global.button.close))]),a("button",{staticClass:"button is-primary is-rounded",on:{click:function(e){e.preventDefault(),t.pay()}}},[t._v("Pagar")])])])},ta=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"modal-card-head has-text-centered"},[a("p",{staticClass:"modal-card-title"},[t._v("Pagar Factura")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"title is-6"},[t._v("Referencia: "),a("br"),a("small",[t._v("*Sin son más dos formas de pagos, separe por comas*")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"file-cta"},[a("span",{staticClass:"file-icon"},[a("i",{staticClass:"fas fa-upload"})]),a("span",{staticClass:"file-label"},[t._v("\n                    Choose a file…\n                ")])])}],ea={data:function(){return{global:k.text,method:[],payment:{nro:"",id_bill:"",method:"",ref:"",images:""},images:[],imagesShow:""}},props:["bill"],methods:{deleteDropFile:function(t){this.images.splice(t,1)},pay:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.payment.id_bill=this.bill._id,this.payment.nro=this.generateNro(),t.next=4,this.uploadImages();case 4:return this.payment.images=t.sent,this.payment.method=this.method,this.bill.status="S",t.next=9,g.post("/payment",this.payment,{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!a.data.res){t.next=5;break}return t.next=3,g.put("/bill/".concat(e.bill._id),e.bill,{headers:{Authorization:"bearer "+e.$cookie.get("token")}}).then(function(t){t.data.res&&(y(e,"S004"),e.$emit("hijo:change"),e.$parent.close())}).catch(function(t){alert(t)});case 3:t.next=6;break;case 5:y(e,"E008");case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){alert(t)});case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),generateNro:function(){var t=new Date;return t.getTime()},uploadImages:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e,a,s,i,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:for(e=new Y.a,a=0;a<this.images.length;a++)s=this.images[a],e.append("images",s);return i="",t.next=5,g.post("/uppayment",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){if(t.data.res)for(var e in t.data.images)i=0==e?t.data.images[e].filename:i+"|"+t.data.images[e].filename}).catch(function(){y(n,"E009")});case 5:return t.abrupt("return",i);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),handleFileUpload:function(){for(var t in this.$refs.images.files)this.images.push(this.$refs.images.files[t]);this.images.pop(),this.images.pop()}}},aa=ea,sa=(a("s7mT"),Object(c["a"])(aa,Qe,ta,!1,null,"335f44fe",null)),ia=sa.exports,na=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("br"),a("div",{staticClass:"center"},[a("button",{staticClass:"button is-outlined is-rounded is-primary",attrs:{type:"button"},on:{click:function(e){t.showPdf()}}},[t._v("Imprimir")])]),a("div",{staticClass:"master"},[a("div",{ref:"pdf",staticClass:"carta"},[a("p",{staticClass:"title is-3 center"},[t._v("Factura")]),a("div",{},[a("p",{},[a("strong",{staticClass:"title is-6"},[t._v("Fecha: ")]),t._v("\n                    "+t._s(t.date())+"\n                ")])]),a("br"),a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-6"},[a("strong",{staticClass:"title is-6"},[t._v("Cliente: ")]),a("p",{},[t._v(t._s(t.client.name+" "+t.client.lastname))]),a("strong",{staticClass:"title is-6"},[t._v("Dirección: ")]),a("p",{},[t._v(t._s(t.client.address.country+", "+t.client.address.state+", "+t.client.address.location+", "+t.client.address.description))])]),a("div",{staticClass:"column is-6"},[a("strong",{staticClass:"title is-6"},[t._v("RIF/C.I: ")]),a("p",{},[t._v(t._s(t.client.nit))]),a("strong",{staticClass:"title is-6"},[t._v("Telf: ")]),a("p",{},[t._v(t._s(t.client.phone))])])]),a("br"),a("b-table",{attrs:{data:t.isEmpty?[]:t.data,bordered:t.isBordered,striped:t.isStriped,narrowed:t.isNarrowed,hoverable:t.isHoverable,loading:t.isLoading,focusable:t.isFocusable,"mobile-cards":t.hasMobileCards},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-table-column",{attrs:{field:"cant",label:"Cant.",centered:""}},[t._v("\n                        "+t._s(e.row.cant)+"\n                    ")]),a("b-table-column",{attrs:{field:"description",label:"Descripción",centered:""}},[t._v("\n                        "+t._s(e.row.description)+"\n                    ")]),a("b-table-column",{attrs:{field:"unit_price",label:"Monto Unitario",centered:""}},[t._v("\n                        "+t._s(e.row.unit_price)+"\n                    ")]),a("b-table-column",{attrs:{field:"total",label:"Monto Total",centered:""}},[t._v("\n                        "+t._s(e.row.total)+"\n                    ")])]}}])},[a("template",{slot:"empty"},[a("section",{staticClass:"section"},[a("div",{staticClass:"content has-text-grey has-text-centered"},[a("p",[a("b-icon",{attrs:{icon:"emoticon-sad",size:"is-large"}})],1),a("p",[t._v("Nothing here.")])])])])],2),a("br"),a("br"),a("p",{staticClass:"end"},[a("strong",{staticClass:"title is-6"},[t._v("Sub-Total: "+t._s(t.bill.sub_total)+" ")])]),a("p",{staticClass:"end"},[a("strong",{staticClass:"title is-6"},[t._v("IVA: "+t._s(t.bill.iva)+" ")])]),a("p",{staticClass:"end"},[a("strong",{staticClass:"title is-6"},[t._v("Total: "+t._s(t.bill.total_amount)+" ")])])],1)]),a("b-loading",{attrs:{"is-full-page":t.isFullPage,active:t.isLoadingPage,"can-cancel":!1},on:{"update:active":function(e){t.isLoadingPage=e}}})],1)},ra=[],oa=a("5RHE"),ca=a.n(oa),la={data:function(){return{data:[],isEmpty:!1,isBordered:!0,isStriped:!0,isNarrowed:!1,isHoverable:!0,isFocusable:!1,isLoading:!1,hasMobileCards:!0,output:"",isLoadingPage:!0,hrs:"",serv:"",client:"",bill:"",ready:!1}},props:["nro_support"],methods:{showPdf:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$html2canvas(this.$refs.pdf,{type:"dataURL"});case 2:this.output=t.sent,e=new ca.a,e.addImage(this.output,"JPEG",25,15),e.save("reporte.pdf");case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),loadData:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.params.nro,t.next=3,g.get("/bill/nro/".concat(e),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){t.data.res&&(a.data=t.data.bill[0].details,a.bill=t.data.bill[0])}).catch(function(t){alert(t),window.close()});case 3:return t.next=5,g.get("/user/".concat(this.bill.id_client),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(e){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e.data.res){t.next=4;break}return s=e.data.user.id_infopersonal,t.next=4,g.get("/infopersonal/".concat(s),{headers:{Authorization:"bearer "+a.$cookie.get("token")}}).then(function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.data.res&&(a.client=e.data.infoPersonal);case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){alert(t),window.close()});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){alert(t),window.close()});case 5:this.isLoadingPage=!1;case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),date:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=String(t.getMonth()+1),a=String(t.getDate()),s=String(t.getFullYear());return e.length<2&&(e="0"+e),a.length<2&&(a="0"+a),"".concat(a,"/").concat(e,"/").concat(s)}},created:function(){this.loadData()},watch:{$route:"loadData"},mounted:function(){this.$nextTick(function(){})}},ua=la,da=(a("L9j8"),Object(c["a"])(ua,na,ra,!1,null,"f07f2c44",null)),pa=da.exports,fa={data:function(){return{isComponentModalDetailsClientActive:!1,isComponentModalPayForClientActive:!1,global:k.text,isEmpty:!1,isBordered:!1,isStriped:!0,isNarrowed:!0,isHoverable:!0,isFocusable:!1,isLoading:!1,hasMobileCards:!0,selected:"",isPaginated:!0,isPaginationSimple:!1,defaultSortDirection:"asc",currentPage:1,perPage:7,showBill:"0",idClient:"",billAll:"",billYes:[],billNot:[],billData:""}},components:{ModalDetailsClient:kt,Breadcrub:Bt,Bill:pa,ModalPayForClient:ia},methods:{listenSon:function(){this.refreshData()},deselect:function(){this.selected=""},loadDetailsClient:function(t){this.idClient=t,this.isComponentModalDetailsClientActive=!0},refreshData:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g.get("/bill/client/".concat(this.$cookie.get("userId")),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){if(t.data.res)for(var a in e.billAll=t.data.bill,e.billYes=[],e.billNot=[],e.billAll)"S"==e.billAll[a].status?e.billYes.push(e.billAll[a]):e.billNot.push(e.billAll[a])}).catch(function(t){alert(t)});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),showBillPdf:function(t){var e=this.$router.resolve({path:"/bill/".concat(t)});window.open(e.href,"_blank")},showReport:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(e){var a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a="",t.next=3,g.get("/report/nro/".concat(e),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){t.data.res&&(a=t.data.report[0])}).catch(function(t){alert(t)});case 3:s=this.$router.resolve({path:"/reportemp/".concat(a.nro_support,"|").concat(a.total_hours,"|").concat(a.total_service)}),window.open(s.href,"_blank");case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),pay:function(){var t=this;""==this.selected?this.$toast.open({message:"Seleccione una fila",type:"is-warning"}):"S"==this.selected.status?this.$toast.open({message:"La factura ya fue pagada",type:"is-warning"}):this.$dialog.confirm({title:"Pagar Factura",message:"¿Estás seguro de pagar la factura nro. #".concat(this.selected.nro,"?"),confirmText:"Pagar",type:"is-success",hasIcon:!0,icon:"dollar-sign",iconPack:"fas",onConfirm:function(){var e=Object(U["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.billData=t.selected,t.isComponentModalPayForClientActive=!0;case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()})}},created:function(){this.refreshData()},watch:{$route:"refreshData"}},ha=fa,ma=(a("7onj"),Object(c["a"])(ha,Ze,We,!1,null,"6c854d20",null)),ba=ma.exports,va=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ga=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("section",{staticClass:"hero is-primary"},[a("div",{staticClass:"hero-body"},[a("div",{staticClass:"container"},[a("h1",{staticClass:"title"},[t._v("\n            Primary title\n        ")]),a("h2",{staticClass:"subtitle"},[t._v("\n            Primary subtitle\n        ")])])])]),a("br"),a("section",{staticClass:"info-tiles"},[a("div",{staticClass:"tile is-ancestor has-text-centered"},[a("div",{staticClass:"tile is-parent"},[a("article",{staticClass:"tile is-child box"},[a("p",{staticClass:"title"},[t._v("439k")]),a("p",{staticClass:"subtitle"},[t._v("Users")])])]),a("div",{staticClass:"tile is-parent"},[a("article",{staticClass:"tile is-child box"},[a("p",{staticClass:"title"},[t._v("59k")]),a("p",{staticClass:"subtitle"},[t._v("Products")])])]),a("div",{staticClass:"tile is-parent"},[a("article",{staticClass:"tile is-child box"},[a("p",{staticClass:"title"},[t._v("3.4k")]),a("p",{staticClass:"subtitle"},[t._v("Open Orders")])])]),a("div",{staticClass:"tile is-parent"},[a("article",{staticClass:"tile is-child box"},[a("p",{staticClass:"title"},[t._v("19")]),a("p",{staticClass:"subtitle"},[t._v("Exceptions")])])])])])])}],Ca={},_a=Object(c["a"])(Ca,va,ga,!1,null,null,null),wa=_a.exports,ka=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("br"),a("div",{staticClass:"center"},[a("button",{staticClass:"button is-outlined is-rounded is-primary",attrs:{type:"button"},on:{click:function(e){t.showPdf()}}},[t._v("Imprimir")])]),a("div",{staticClass:"master"},[a("div",{ref:"pdf",staticClass:"carta"},[a("p",{staticClass:"title is-3 center"},[t._v("Reporte de Soporte")]),a("br"),a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-6"},[a("strong",{staticClass:"title is-5 max"},[t._v("Cliente: ")]),a("p",{staticClass:"max"},[t._v(t._s(t.client.name+" "+t.client.lastname))])]),a("div",{staticClass:"column is-6 end"},[a("strong",{staticClass:"title is-5 max"},[t._v("Fecha: ")]),a("p",{staticClass:"max"},[t._v(t._s(t.date()))])])]),a("br"),a("p",{staticClass:"title is-4 center"},[t._v("Detalles")]),a("b-table",{attrs:{data:t.isEmpty?[]:t.data,bordered:t.isBordered,striped:t.isStriped,narrowed:t.isNarrowed,hoverable:t.isHoverable,loading:t.isLoading,focusable:t.isFocusable,"mobile-cards":t.hasMobileCards},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-table-column",{attrs:{field:"title",label:"Titulo",centered:""}},[t._v("\n                        "+t._s(e.row.title)+"\n                    ")]),a("b-table-column",{attrs:{field:"details",label:"Detalles",centered:""}},[a("p",[a("strong",[t._v("Nro. de Serie: ")]),t._v(t._s(e.row.nro_serie))]),a("p",[a("strong",[t._v("Marca: ")]),t._v(t._s(e.row.make))]),a("p",[a("strong",[t._v("Modelo: ")]),t._v(t._s(e.row.model))])]),a("b-table-column",{attrs:{field:"description",label:"Descripción",centered:""}},[t._v("\n                        "+t._s(e.row.description)+"\n                    ")]),a("b-table-column",{attrs:{field:"date",label:"Fecha",centered:""}},[a("span",{staticClass:"tag is-dark"},[t._v("\n                            "+t._s(e.row.date.substring(0,10))+"\n                        ")])]),a("b-table-column",{attrs:{field:"hours_service",label:"Hrs/Serv",centered:""}},[t._v("\n                        "+t._s(e.row.hours_service)+"\n                    ")])]}}])},[a("template",{slot:"empty"},[a("section",{staticClass:"section"},[a("div",{staticClass:"content has-text-grey has-text-centered"},[a("p",[a("b-icon",{attrs:{icon:"emoticon-sad",size:"is-large"}})],1),a("p",[t._v("Nothing here.")])])])])],2),a("br"),a("br"),a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-6"},[a("p",[a("strong",{staticClass:"title is-6"},[t._v("Cantidad de Horas Técnicas: "+t._s(t.hrs))])])]),a("div",{staticClass:"column is-6 end"},[a("p",[a("strong",{staticClass:"title is-6"},[t._v("Servicios Realizados: "+t._s(t.serv))])])])])],1)]),a("b-loading",{attrs:{"is-full-page":t.isFullPage,active:t.isLoadingPage,"can-cancel":!1},on:{"update:active":function(e){t.isLoadingPage=e}}})],1)},ya=[],xa={data:function(){return{data:[],isEmpty:!1,isBordered:!0,isStriped:!0,isNarrowed:!1,isHoverable:!0,isFocusable:!1,isLoading:!1,hasMobileCards:!0,output:"",isLoadingPage:!0,hrs:"",serv:"",client:"",ready:!1}},props:["nro_support"],methods:{showPdf:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$html2canvas(this.$refs.pdf,{type:"dataURL"});case 2:this.output=t.sent,e=new ca.a,e.addImage(this.output,"JPEG",25,15),e.save("reporte.pdf");case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),loadData:function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(){var e,a,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.params.nro.split("|"),a=e[0],this.hrs=e[1],this.serv=e[2],t.next=6,g.get("/record/nro/".concat(a),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(t){t.data.res&&(s.data=t.data.record[0].activities)}).catch(function(t){alert(t),window.close()});case 6:return t.next=8,g.get("/support/nro/".concat(a),{headers:{Authorization:"bearer "+this.$cookie.get("token")}}).then(function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e.data.res){t.next=4;break}return a=e.data.support,t.next=4,g.get("/user/".concat(a),{headers:{Authorization:"bearer "+s.$cookie.get("token")}}).then(function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e.data.res){t.next=4;break}return a=e.data.user.id_infopersonal,t.next=4,g.get("/infopersonal/".concat(a),{headers:{Authorization:"bearer "+s.$cookie.get("token")}}).then(function(){var t=Object(U["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.data.res&&(s.client=e.data.infoPersonal);case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){alert(t),window.close()});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){alert(t),window.close()});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){alert(t),window.close()});case 8:this.isLoadingPage=!1;case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),date:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=String(t.getMonth()+1),a=String(t.getDate()),s=String(t.getFullYear());return e.length<2&&(e="0"+e),a.length<2&&(a="0"+a),"".concat(a,"/").concat(e,"/").concat(s)}},created:function(){this.loadData()},watch:{$route:"loadData"},mounted:function(){this.$nextTick(function(){})}},Sa=xa,$a=(a("AALZ"),Object(c["a"])(Sa,ka,ya,!1,null,"3ab907da",null)),Aa=$a.exports;m.a.configure({showSpinner:!1}),m.a.configure({minimum:.3}),s["default"].use(d["a"]);var Da=new d["a"]({routes:[{path:"/",name:"home",component:M,meta:{isAuth:!1}},{path:"/newroot",name:"newroot",component:ct,meta:{isAuth:!1}},{path:"/login",name:"login",component:I,meta:{isAuth:!0}},{path:"/reportemp/:nro",name:"reportemp",component:Aa,meta:{isAuth:!1,requiredRol:!1,requiredAuth:!1},props:!0},{path:"/bill/:nro",name:"bill",component:pa,meta:{isAuth:!1,requiredRol:!1,requiredAuth:!1},props:!0},{path:"/dash",name:"dash",component:at,meta:{requiredAuth:!0},props:!0,children:[{path:"supporta",name:"supporta",component:Ht,meta:{requiredRol:!0,requiredAuth:!0}},{path:"supportc",name:"supportc",component:ae,meta:{requiredRol:!0,requiredAuth:!0}},{path:"users",name:"users",component:$e,meta:{requiredRol:!0,requiredAuth:!0}},{path:"report",name:"report",component:he,meta:{requiredRol:!0,requiredAuth:!0}},{path:"calendar",name:"calendar",component:Ie,meta:{requiredRol:!0,requiredAuth:!0}},{path:"billadmin",name:"billadmin",component:Xe,meta:{requiredRol:!0,requiredAuth:!0}},{path:"billclient",name:"billclient",component:ba,meta:{requiredRol:!0,requiredAuth:!0}},{path:"homeforall",name:"homeforall",component:wa,meta:{requiredRol:!0,requiredAuth:!0}}]}]});Da.beforeEach(function(t,e,a){t.meta.requiredAuth?$.user.authenticated?a():Da.push("/login"):a(),t.meta.isAuth&&$.user.authenticated?Da.push("/dash"):a()}),Da.beforeResolve(function(t,e,a){t.name&&m.a.start(),a()}),Da.afterEach(function(){m.a.done()});var Ra=Da,Pa=a("AOfK"),Ea=a.n(Pa),Ma=a("7pj7"),ja=a.n(Ma),Fa=a("hf9i"),Na=a.n(Fa),za=a("Q1/M"),Oa=a.n(za),Ia=a("Y9a5"),La=a.n(Ia),Ba=a("OmDE"),Ua=a.n(Ba),Ta=(a("BfTr"),a("P6ep")),qa=a.n(Ta);a("jgpq");s["default"].use(Ea.a),s["default"].use(ja.a),s["default"].use(qa.a),s["default"].use(La.a),s["default"].use(Ua.a),s["default"].use(Oa.a,{locale:"en",color:"#4f93ed"});var Ha={isEnabled:!0,logLevel:"debug",stringifyArguments:!1,showLogLevel:!1,showMethodName:!1,separator:"|",showConsoleColors:!1};s["default"].use(Na.a,Ha),s["default"].config.productionTip=!1,$.checkAuthentication(),new s["default"]({router:Ra,render:function(t){return t(u)}}).$mount("#app")},"WqV+":function(t,e,a){"use strict";var s=a("lVwD"),i=a.n(s);i.a},Y7bs:function(t,e,a){"use strict";var s=a("rvM1"),i=a.n(s);i.a},gI2r:function(t,e,a){},jUIg:function(t,e,a){"use strict";var s=a("Kuw1"),i=a.n(s);i.a},jw4u:function(t,e,a){},lVwD:function(t,e,a){},nNx0:function(t,e,a){"use strict";var s=a("uWEC"),i=a.n(s);i.a},oR7B:function(t,e,a){},oeyi:function(t,e,a){},qZZC:function(t,e,a){"use strict";var s=a("MRnX"),i=a.n(s);i.a},qs6R:function(t,e,a){"use strict";var s=a("33hS"),i=a.n(s);i.a},qurk:function(t,e,a){},rvM1:function(t,e,a){},s7mT:function(t,e,a){"use strict";var s=a("HIoq"),i=a.n(s);i.a},tjCq:function(t,e,a){},uWEC:function(t,e,a){},uuFC:function(t,e,a){"use strict";var s=a("HqTB"),i=a.n(s);i.a},x36v:function(t,e,a){}});
//# sourceMappingURL=app.99357431.js.map